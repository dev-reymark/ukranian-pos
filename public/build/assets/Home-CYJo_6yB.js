import{r as i,e as E,j as r,Y as Xe,a as oe}from"./app-CZcGEx8O.js";import{S as Ye}from"./sweetalert2.all-BBE362Fb.js";import{F as Ge}from"./PumpDelivery-c5FiEWdC.js";import qe from"./MOPCard-D3DIo_Ns.js";import Qe,{buttons as We}from"./POSKeyboard-DbPpQ6B0.js";import{PumpCard as Ke}from"./PumpCard-BTiQz6AX.js";import{CustomerDetails as Ze}from"./CustomerDetails-ShrischK.js";import{PrinterStatus as et}from"./PrinterStatus-nMmsLW8V.js";import{GetCashier as tt}from"./GetCashier-CMBip5W_.js";import{GetDateTime as st}from"./GetDateTime-DFtGg_yI.js";import{ThemeSwitcher as at}from"./ThemeSwitcher-PcQgL2j2.js";import ot from"./Index-BqUwJRM4.js";import{CardDetails as nt}from"./CardDetails-DeNGzi9r.js";import{S as rt,t as it,a as de}from"./SaleWindowTabs-IXgHJ9PM.js";import lt from"./ReportsIndex-cdxjGCmh.js";import{c as re}from"./chunk-H4VOEXHF-DpLTf5gJ.js";import{c as ct}from"./chunk-J333S7JQ-DGLc4ZIA.js";import{c as dt}from"./chunk-5ALFRFZW-DX8ZXjhw.js";import{s as ut}from"./chunk-IXXDDLGU-92gEEV0y.js";import{i as Ce}from"./chunk-GQQM5TNQ-hio0dr-9.js";import"./iconBase-Dgkp8RTQ.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";import"./chunk-N2KXC5ZE-MoJJ0Fzs.js";import"./chunk-YRZGWF2W-DGRibSru.js";import"./chunk-RQNQ5XFG-BcHacfwU.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./chunk-XHQUSKIE-DYQoqWMy.js";import"./useFocusable-D7nUg3lo.js";import"./FocusScope-OVdnvuqB.js";import"./useToggleState-CARJhxbC.js";import"./useFormReset-BytK_cAg.js";import"./useControlledState-Dgcm7Qc-.js";import"./index-DgP1l9hs.js";import"./index-wFwjftmg.js";import"./useHover-Cm4DiJtH.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./useFormValidationState-TkAxG9UF.js";import"./VisuallyHidden-o3RnyzbD.js";import"./chunk-DBLREEYE-CWR_lO7P.js";import"./index-CWOzrr8i.js";import"./chunk-6NL67ZRH-DF1o-Xcs.js";import"./Icon-C03D-bNp.js";import"./PumpStatus-5SYFXcQO.js";import"./index-B7flH9Mq.js";import"./chunk-4WFLSIHH-DfR-VTvD.js";import"./index-CsWtTAY4.js";import"./chunk-M3MASYO7-DozvLNwE.js";import"./chunk-JHUBASYZ-pBSL9k6r.js";import"./chunk-P2T5LMDM-D1NanYQl.js";import"./useLabels-CYYLKGe-.js";import"./chunk-QY5NICTW-BlUeLTL2.js";import"./ElectricJournal-BxfUjEbH.js";import"./index-X92CTFGl.js";import"./chunk-44JHHBS2-D38-KfcE.js";import"./AboutSoftware-FQzbtofm.js";import"./ApplicationLogo-B2gFgIdW.js";import"./chunk-NK4BRF7C-3NfX_Rt2.js";import"./index-CUkVWmHw.js";function Pe(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(a=Pe(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function ee(){for(var e,t,a=0,s="",n=arguments.length;a<n;a++)(e=arguments[a])&&(t=Pe(e))&&(s&&(s+=" "),s+=t);return s}const le=e=>typeof e=="number"&&!isNaN(e),ae=e=>typeof e=="string",H=e=>typeof e=="function",pe=e=>ae(e)||H(e)?e:null,Ee=e=>i.isValidElement(e)||ae(e)||H(e)||le(e);function mt(e,t,a){a===void 0&&(a=300);const{scrollHeight:s,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=s+"px",n.transition=`all ${a}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(t,a)})})}function ge(e){let{enter:t,exit:a,appendPosition:s=!1,collapse:n=!0,collapseDuration:g=300}=e;return function(o){let{children:T,position:v,preventExitTransition:S,done:p,nodeRef:w,isIn:C,playToast:O}=o;const h=s?`${t}--${v}`:t,f=s?`${a}--${v}`:a,I=i.useRef(0);return i.useLayoutEffect(()=>{const y=w.current,d=h.split(" "),l=b=>{b.target===w.current&&(O(),y.removeEventListener("animationend",l),y.removeEventListener("animationcancel",l),I.current===0&&b.type!=="animationcancel"&&y.classList.remove(...d))};y.classList.add(...d),y.addEventListener("animationend",l),y.addEventListener("animationcancel",l)},[]),i.useEffect(()=>{const y=w.current,d=()=>{y.removeEventListener("animationend",d),n?mt(y,p,g):p()};C||(S?d():(I.current=1,y.className+=` ${f}`,y.addEventListener("animationend",d)))},[C]),E.createElement(E.Fragment,null,T)}}function we(e,t){return e!=null?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const R=new Map;let ce=[];const Te=new Set,pt=e=>Te.forEach(t=>t(e)),Oe=()=>R.size>0;function De(e,t){var a;if(t)return!((a=R.get(t))==null||!a.isToastActive(e));let s=!1;return R.forEach(n=>{n.isToastActive(e)&&(s=!0)}),s}function je(e,t){Ee(e)&&(Oe()||ce.push({content:e,options:t}),R.forEach(a=>{a.buildToast(e,t)}))}function _e(e,t){R.forEach(a=>{t!=null&&t!=null&&t.containerId?(t==null?void 0:t.containerId)===a.id&&a.toggle(e,t==null?void 0:t.id):a.toggle(e,t==null?void 0:t.id)})}function ft(e){const{subscribe:t,getSnapshot:a,setProps:s}=i.useRef(function(g){const o=g.containerId||1;return{subscribe(T){const v=function(p,w,C){let O=1,h=0,f=[],I=[],y=[],d=w;const l=new Map,b=new Set,B=()=>{y=Array.from(l.values()),b.forEach(m=>m())},z=m=>{I=m==null?[]:I.filter(N=>N!==m),B()},D=m=>{const{toastId:N,onOpen:k,updateId:U,children:X}=m.props,Q=U==null;m.staleId&&l.delete(m.staleId),l.set(N,m),I=[...I,m.props.toastId].filter(Y=>Y!==m.staleId),B(),C(we(m,Q?"added":"updated")),Q&&H(k)&&k(i.isValidElement(X)&&X.props)};return{id:p,props:d,observe:m=>(b.add(m),()=>b.delete(m)),toggle:(m,N)=>{l.forEach(k=>{N!=null&&N!==k.props.toastId||H(k.toggle)&&k.toggle(m)})},removeToast:z,toasts:l,clearQueue:()=>{h-=f.length,f=[]},buildToast:(m,N)=>{if((F=>{let{containerId:M,toastId:$,updateId:A}=F;const q=M?M!==p:p!==1,se=l.has($)&&A==null;return q||se})(N))return;const{toastId:k,updateId:U,data:X,staleId:Q,delay:Y}=N,W=()=>{z(k)},te=U==null;te&&h++;const V={...d,style:d.toastStyle,key:O++,...Object.fromEntries(Object.entries(N).filter(F=>{let[M,$]=F;return $!=null})),toastId:k,updateId:U,data:X,closeToast:W,isIn:!1,className:pe(N.className||d.toastClassName),bodyClassName:pe(N.bodyClassName||d.bodyClassName),progressClassName:pe(N.progressClassName||d.progressClassName),autoClose:!N.isLoading&&(G=N.autoClose,K=d.autoClose,G===!1||le(G)&&G>0?G:K),deleteToast(){const F=l.get(k),{onClose:M,children:$}=F.props;H(M)&&M(i.isValidElement($)&&$.props),C(we(F,"removed")),l.delete(k),h--,h<0&&(h=0),f.length>0?D(f.shift()):B()}};var G,K;V.closeButton=d.closeButton,N.closeButton===!1||Ee(N.closeButton)?V.closeButton=N.closeButton:N.closeButton===!0&&(V.closeButton=!Ee(d.closeButton)||d.closeButton);let Z=m;i.isValidElement(m)&&!ae(m.type)?Z=i.cloneElement(m,{closeToast:W,toastProps:V,data:X}):H(m)&&(Z=m({closeToast:W,toastProps:V,data:X}));const J={content:Z,props:V,staleId:Q};d.limit&&d.limit>0&&h>d.limit&&te?f.push(J):le(Y)?setTimeout(()=>{D(J)},Y):D(J)},setProps(m){d=m},setToggle:(m,N)=>{l.get(m).toggle=N},isToastActive:m=>I.some(N=>N===m),getSnapshot:()=>d.newestOnTop?y.reverse():y}}(o,g,pt);R.set(o,v);const S=v.observe(T);return ce.forEach(p=>je(p.content,p.options)),ce=[],()=>{S(),R.delete(o)}},setProps(T){var v;(v=R.get(o))==null||v.setProps(T)},getSnapshot(){var T;return(T=R.get(o))==null?void 0:T.getSnapshot()}}}(e)).current;s(e);const n=i.useSyncExternalStore(t,a,a);return{getToastToRender:function(g){if(!n)return[];const o=new Map;return n.forEach(T=>{const{position:v}=T.props;o.has(v)||o.set(v,[]),o.get(v).push(T)}),Array.from(o,T=>g(T[0],T[1]))},isToastActive:De,count:n==null?void 0:n.length}}function gt(e){const[t,a]=i.useState(!1),[s,n]=i.useState(!1),g=i.useRef(null),o=i.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:T,pauseOnHover:v,closeToast:S,onClick:p,closeOnClick:w}=e;var C,O;function h(){a(!0)}function f(){a(!1)}function I(l){const b=g.current;o.canDrag&&b&&(o.didMove=!0,t&&f(),o.delta=e.draggableDirection==="x"?l.clientX-o.start:l.clientY-o.start,o.start!==l.clientX&&(o.canCloseOnClick=!1),b.style.transform=`translate3d(${e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`},0)`,b.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function y(){document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",y);const l=g.current;if(o.canDrag&&o.didMove&&l){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return n(!0),e.closeToast(),void e.collapseAll();l.style.transition="transform 0.2s, opacity 0.2s",l.style.removeProperty("transform"),l.style.removeProperty("opacity")}}(O=R.get((C={id:e.toastId,containerId:e.containerId,fn:a}).containerId||1))==null||O.setToggle(C.id,C.fn),i.useEffect(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",h),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",f)}},[e.pauseOnFocusLoss]);const d={onPointerDown:function(l){if(e.draggable===!0||e.draggable===l.pointerType){o.didMove=!1,document.addEventListener("pointermove",I),document.addEventListener("pointerup",y);const b=g.current;o.canCloseOnClick=!0,o.canDrag=!0,b.style.transition="none",e.draggableDirection==="x"?(o.start=l.clientX,o.removalDistance=b.offsetWidth*(e.draggablePercent/100)):(o.start=l.clientY,o.removalDistance=b.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(l){const{top:b,bottom:B,left:z,right:D}=g.current.getBoundingClientRect();l.nativeEvent.type!=="touchend"&&e.pauseOnHover&&l.clientX>=z&&l.clientX<=D&&l.clientY>=b&&l.clientY<=B?f():h()}};return T&&v&&(d.onMouseEnter=f,e.stacked||(d.onMouseLeave=h)),w&&(d.onClick=l=>{p&&p(l),o.canCloseOnClick&&S()}),{playToast:h,pauseToast:f,isRunning:t,preventExitTransition:s,toastRef:g,eventHandlers:d}}function ht(e){let{delay:t,isRunning:a,closeToast:s,type:n="default",hide:g,className:o,style:T,controlledProgress:v,progress:S,rtl:p,isIn:w,theme:C}=e;const O=g||v&&S===0,h={...T,animationDuration:`${t}ms`,animationPlayState:a?"running":"paused"};v&&(h.transform=`scaleX(${S})`);const f=ee("Toastify__progress-bar",v?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${C}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":p}),I=H(o)?o({rtl:p,type:n,defaultClassName:f}):ee(f,o),y={[v&&S>=1?"onTransitionEnd":"onAnimationEnd"]:v&&S<1?null:()=>{w&&s()}};return E.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":O},E.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${C} Toastify__progress-bar--${n}`}),E.createElement("div",{role:"progressbar","aria-hidden":O?"true":"false","aria-label":"notification timer",className:I,style:h,...y}))}let yt=1;const Le=()=>""+yt++;function vt(e){return e&&(ae(e.toastId)||le(e.toastId))?e.toastId:Le()}function ie(e,t){return je(e,t),t.toastId}function fe(e,t){return{...t,type:t&&t.type||e,toastId:vt(t)}}function ue(e){return(t,a)=>ie(t,fe(e,a))}function u(e,t){return ie(e,fe("default",t))}u.loading=(e,t)=>ie(e,fe("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),u.promise=function(e,t,a){let s,{pending:n,error:g,success:o}=t;n&&(s=ae(n)?u.loading(n,a):u.loading(n.render,{...a,...n}));const T={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},v=(p,w,C)=>{if(w==null)return void u.dismiss(s);const O={type:p,...T,...a,data:C},h=ae(w)?{render:w}:w;return s?u.update(s,{...O,...h}):u(h.render,{...O,...h}),C},S=H(e)?e():e;return S.then(p=>v("success",o,p)).catch(p=>v("error",g,p)),S},u.success=ue("success"),u.info=ue("info"),u.error=ue("error"),u.warning=ue("warning"),u.warn=u.warning,u.dark=(e,t)=>ie(e,fe("default",{theme:"dark",...t})),u.dismiss=function(e){(function(t){var a;if(Oe()){if(t==null||ae(a=t)||le(a))R.forEach(s=>{s.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){const s=R.get(t.containerId);s?s.removeToast(t.id):R.forEach(n=>{n.removeToast(t.id)})}}else ce=ce.filter(s=>t!=null&&s.options.toastId!==t)})(e)},u.clearWaitingQueue=function(e){e===void 0&&(e={}),R.forEach(t=>{!t.props.limit||e.containerId&&t.id!==e.containerId||t.clearQueue()})},u.isActive=De,u.update=function(e,t){t===void 0&&(t={});const a=((s,n)=>{var g;let{containerId:o}=n;return(g=R.get(o||1))==null?void 0:g.toasts.get(s)})(e,t);if(a){const{props:s,content:n}=a,g={delay:100,...s,...t,toastId:t.toastId||e,updateId:Le()};g.toastId!==e&&(g.staleId=e);const o=g.render||n;delete g.render,ie(o,g)}},u.done=e=>{u.update(e,{progress:1})},u.onChange=function(e){return Te.add(e),()=>{Te.delete(e)}},u.play=e=>_e(!0,e),u.pause=e=>_e(!1,e);const bt=typeof window<"u"?i.useLayoutEffect:i.useEffect,me=e=>{let{theme:t,type:a,isLoading:s,...n}=e;return E.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...n})},xe={info:function(e){return E.createElement(me,{...e},E.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return E.createElement(me,{...e},E.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return E.createElement(me,{...e},E.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return E.createElement(me,{...e},E.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return E.createElement("div",{className:"Toastify__spinner"})}},xt=e=>{const{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:n,playToast:g}=gt(e),{closeButton:o,children:T,autoClose:v,onClick:S,type:p,hideProgressBar:w,closeToast:C,transition:O,position:h,className:f,style:I,bodyClassName:y,bodyStyle:d,progressClassName:l,progressStyle:b,updateId:B,role:z,progress:D,rtl:m,toastId:N,deleteToast:k,isIn:U,isLoading:X,closeOnClick:Q,theme:Y}=e,W=ee("Toastify__toast",`Toastify__toast-theme--${Y}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":m},{"Toastify__toast--close-on-click":Q}),te=H(f)?f({rtl:m,position:h,type:p,defaultClassName:W}):ee(W,f),V=function(J){let{theme:F,type:M,isLoading:$,icon:A}=J,q=null;const se={theme:F,type:M};return A===!1||(H(A)?q=A({...se,isLoading:$}):i.isValidElement(A)?q=i.cloneElement(A,se):$?q=xe.spinner():(ye=>ye in xe)(M)&&(q=xe[M](se))),q}(e),G=!!D||!v,K={closeToast:C,type:p,theme:Y};let Z=null;return o===!1||(Z=H(o)?o(K):i.isValidElement(o)?i.cloneElement(o,K):function(J){let{closeToast:F,theme:M,ariaLabel:$="close"}=J;return E.createElement("button",{className:`Toastify__close-button Toastify__close-button--${M}`,type:"button",onClick:A=>{A.stopPropagation(),F(A)},"aria-label":$},E.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},E.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(K)),E.createElement(O,{isIn:U,done:k,position:h,preventExitTransition:a,nodeRef:s,playToast:g},E.createElement("div",{id:N,onClick:S,"data-in":U,className:te,...n,style:I,ref:s},E.createElement("div",{...U&&{role:z},className:H(y)?y({type:p}):ee("Toastify__toast-body",y),style:d},V!=null&&E.createElement("div",{className:ee("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!X})},V),E.createElement("div",null,T)),Z,E.createElement(ht,{...B&&!G?{key:`pb-${B}`}:{},rtl:m,theme:Y,delay:v,isRunning:t,isIn:U,closeToast:C,hide:w,type:p,style:b,className:l,controlledProgress:G,progress:D||0})))},he=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},Et=ge(he("bounce",!0));ge(he("slide",!0));const Tt=ge(he("zoom"));ge(he("flip"));const St={position:"top-right",transition:Et,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function It(e){let t={...St,...e};const a=e.stacked,[s,n]=i.useState(!0),g=i.useRef(null),{getToastToRender:o,isToastActive:T,count:v}=ft(t),{className:S,style:p,rtl:w,containerId:C}=t;function O(f){const I=ee("Toastify__toast-container",`Toastify__toast-container--${f}`,{"Toastify__toast-container--rtl":w});return H(S)?S({position:f,rtl:w,defaultClassName:I}):ee(I,pe(S))}function h(){a&&(n(!0),u.play())}return bt(()=>{if(a){var f;const I=g.current.querySelectorAll('[data-in="true"]'),y=12,d=(f=t.position)==null?void 0:f.includes("top");let l=0,b=0;Array.from(I).reverse().forEach((B,z)=>{const D=B;D.classList.add("Toastify__toast--stacked"),z>0&&(D.dataset.collapsed=`${s}`),D.dataset.pos||(D.dataset.pos=d?"top":"bot");const m=l*(s?.2:1)+(s?0:y*z);D.style.setProperty("--y",`${d?m:-1*m}px`),D.style.setProperty("--g",`${y}`),D.style.setProperty("--s",""+(1-(s?b:0))),l+=D.offsetHeight,b+=.025})}},[s,v,a]),E.createElement("div",{ref:g,className:"Toastify",id:C,onMouseEnter:()=>{a&&(n(!1),u.pause())},onMouseLeave:h},o((f,I)=>{const y=I.length?{...p}:{...p,pointerEvents:"none"};return E.createElement("div",{className:O(f),style:y,key:`container-${f}`},I.map(d=>{let{content:l,props:b}=d;return E.createElement(xt,{...b,stacked:a,collapseAll:h,isIn:T(b.toastId,b.containerId),style:b.style,key:`toast-${b.key}`},l)}))}))}function Ps(){const[e,t]=i.useState([]),[a,s]=i.useState(""),[n,g]=i.useState([]),[o,T]=i.useState([]),[v,S]=i.useState(!1),[p,w]=i.useState(()=>{const c=localStorage.getItem("deliveryData");return c?JSON.parse(c):[]}),[C,O]=i.useState(null),[h,f]=i.useState(!1),[I,y]=i.useState(!1),d=i.useRef(null),[l,b]=i.useState([]),[B,z]=i.useState(0),[D,m]=i.useState(!1),[N,k]=i.useState(0),[U,X]=i.useState(!1),[Q,Y]=i.useState(""),[W,te]=i.useState(""),[V,G]=i.useState(""),[K,Z]=i.useState(""),[J,F]=i.useState(""),[M,$]=i.useState(""),[A,q]=i.useState(""),se=async()=>{if((await Ye.fire({title:"Are you sure?",text:"You are about to log out and you won't be able to recover this session!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, log out!"})).isConfirmed)try{await oe.post("/logout"),window.location.href="/"}catch(x){console.error("Error logging out:",x)}},ye=()=>{X(!0)},Se=()=>{X(!1)},Me=()=>{Se()},ke=c=>{w(x=>{const j=[...x,c];return localStorage.setItem("deliveryData",JSON.stringify(j)),j})},Ae=()=>{s("")},Re=()=>{s(`Subtotal: ₱${ne}`)},$e=()=>{if(p.length===0){u.error("No transactions to void");return}w([]),localStorage.removeItem("transaction"),localStorage.removeItem("deliveryData"),localStorage.removeItem("disabledIds"),u.success("All transactions voided."),z(0),s(""),window.dispatchEvent(new Event("disabledIdsUpdated"))},Be=()=>{if(console.log("Selected Row:",C),C!==null){const c=p.filter(P=>P.Delivery_ID!==C);w(c),localStorage.setItem("deliveryData",JSON.stringify(c)),u.success("Transaction voided"),O(null);const x=c.reduce((P,L)=>P+parseFloat(L.Amount||0),0).toFixed(2),j=Math.max(0,B-x).toFixed(2);z(B),s(j);const _=localStorage.getItem("disabledIds");if(_){const P=new Set(JSON.parse(_));P.delete(C),localStorage.setItem("disabledIds",JSON.stringify(Array.from(P))),window.dispatchEvent(new Event("disabledIdsUpdated"))}}else u.error("No transaction selected")},Ie=()=>{y(!0),window.removeEventListener("click",Ie)};i.useEffect(()=>{window.addEventListener("click",Ie);const c=()=>{oe.get("/get-pump-status").then(_=>{const P=_.data;g(P);const L=P.some(be=>be.Data.NozzleUp);I&&(L&&!h?(d.current&&(d.current.loop=!0,d.current.play().catch(be=>{console.error("Error playing sound:",be)})),f(!0)):!L&&h&&(d.current&&(d.current.pause(),d.current.currentTime=0),f(!1)))}).catch(_=>{console.error("Error fetching pump status:",_)})},x=()=>{oe.get("/get-mop").then(_=>{T(_.data.data);const P=e.some(L=>L.MOP_Ref==="3");S(P)}).catch(_=>{console.error("Error fetching MOP list:",_)})};c(),x();const j=setInterval(c,500);return()=>clearInterval(j)},[h,I]);const ze=c=>{s(x=>x+c),z(x=>x+c)},Fe=async()=>{try{const c=await oe.post("/stop-all-pumps");u.success("All pumps stopped successfully"),console.log("All pumps stopped:",c.data)}catch(c){u.error("Error stopping all pumps"),console.error("Error stopping all pumps:",c)}},Ne=async c=>{if(!c){u.error("Transaction ID is undefined");return}try{const j=(await oe.get(`/print-receipt/${c}`)).data}catch(x){u.error("Error fetching receipt data"),console.error("Error fetching receipt data:",x)}},He={handleLogout:se,handleVoid:Be,handleVoidAll:$e,setInputValue:s,handleClear:Ae,handleSubTotal:Re,handlePrintReceipt:Ne,handleStopAllPumps:Fe,handleOpenCustomerDetails:ye},Ve=async c=>{console.log("MOP selected:",c);const x=parseFloat(a.replace("₱","").replace(",",""));if(a===""||x<=0){u.error("Please enter an amount before selecting a method of payment.");return}const j=JSON.parse(localStorage.getItem("transaction"))||{subtotal:parseFloat(ne),payments:[],remainingBalance:parseFloat(ne)},_=j.remainingBalance-x;if(_>=0)j.payments.push({mopName:c.MOP_Name,amount:x}),j.remainingBalance=_,localStorage.setItem("transaction",JSON.stringify(j)),c.MOP_Ref==="3"?S(!0):_===0?await ve():s(`Amount Due: ₱${_.toFixed(2)}`);else{const P=Math.abs(_).toFixed(2);u.success(`Change: ₱${P}`),j.payments.push({mopName:c.MOP_Name,amount:x}),j.remainingBalance=0,localStorage.setItem("transaction",JSON.stringify(j)),s(`Change: ₱${P}`),s(`Change: ₱${P}`),c.MOP_Ref==="3"?S(!0):await ve()}},ne=p.reduce((c,x)=>c+parseFloat(x.Amount||0),0).toFixed(2),[Je,Ue]=i.useState({change:0,mopNames:[],mopPayments:[]}),ve=async()=>{const c=JSON.parse(localStorage.getItem("transaction"));if(!c){u.error("No transaction data found");return}if(l&&l.MOP_Ref==="3"&&(!J||!M||!A)){u.error("Please provide complete card details."),S(!0);return}const x=c.payments.reduce((_,P)=>_+P.amount,0),j=Math.max(0,x-c.subtotal).toFixed(2);try{const P=(await oe.post("/store-transactions",{subtotal:c.subtotal,taxTotal:c.subtotal/1.12*.12,change:parseFloat(j),mopNames:c.payments.map(L=>L.mopName.trim()),mopPayments:c.payments,deliveryIds:p.map(L=>({Delivery_ID:L.Delivery_ID,Pump:L.Pump,Nozzle:L.Nozzle,Volume:L.Volume,Price:L.Price,Amount:L.Amount,FuelGradeName:L.FuelGradeName})),customer:{name:Q,address:W,tin:V,businessStyle:K},cardDetails:{name:A,code:M,number:J}})).data.transaction;P?(localStorage.setItem("transactionId",P),u.success("Transaction saved successfully"),m(!0),k(0),s("Transaction Complete"),Ue({change:parseFloat(j),mopNames:c.payments.map(L=>L.mopName),mopPayments:c.payments}),localStorage.removeItem("transaction"),F(""),$(""),q(""),Ne(P)):u.error("Error retrieving transaction ID")}catch(_){u.error("Error saving transaction"),console.error("Error saving transaction:",_)}};return r.jsxs(r.Fragment,{children:[r.jsx(Xe,{title:"Home"}),r.jsx("audio",{ref:d,src:"assets/audio/nozzle-status-sound.wav"}),r.jsx("main",{children:r.jsxs(re,{className:"grid lg:grid-cols-2 gap-2 p-2 h-[100vh]",children:[r.jsxs(re,{className:"dark:bg-gray-900 p-2 flex flex-col h-full",children:[r.jsx("div",{className:"flex-none h-[20%]",children:r.jsxs(re,{className:"max-w-full h-full",children:[r.jsxs(ct,{className:"justify-between",children:[r.jsx(tt,{}),r.jsx(st,{})]}),r.jsx(dt,{className:"justify-between",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-[70%] h-[70px] bg-slate-200 rounded-lg shadow-sm relative",children:r.jsx(It,{position:"top-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",transition:Tt,style:{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"50%"}})}),r.jsx(et,{}),r.jsx(at,{})]})})]})}),r.jsx(ut,{y:3}),r.jsx("div",{className:"flex-grow",children:r.jsx(rt,{deliveryData:p,setSelectedRow:O,subtotal:ne,transactionSaved:D,transactionSummary:Je})}),r.jsx("div",{className:"flex-none",children:r.jsxs(re,{className:"w-full gap-2 p-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Ce,{variant:"bordered",label:r.jsx("p",{className:"font-bold text-xl",children:"SUBTOTAL"}),size:"lg",value:`₱${ne}`,labelPlacement:"outside-left",className:"w-[40%]",classNames:{input:["text-black text-xl font-bold text-right"]},isReadOnly:!0}),r.jsx(Ce,{variant:"bordered",className:"w-[60%]",classNames:{input:["text-black text-2xl font-bold text-right"]},value:a,isReadOnly:!0,size:"lg"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:r.jsx(Qe,{handleButtonClick:ze,buttons:We,buttonClickHandlers:He,setInputValue:s})})]})})]}),r.jsx(re,{className:"dark:bg-gray-900 p-2",children:r.jsx("div",{className:"flex w-full flex-col",children:r.jsxs(it,{"aria-label":"Pumps",fullWidth:!0,children:[r.jsx(de,{title:"PUMPS",children:n.length===0?r.jsxs("div",{className:"flex flex-col items-center mt-6",children:[r.jsx(Ge,{className:"w-12 h-12 text-danger"}),r.jsx("span",{className:"mt-4",children:"No pumps found"})]}):r.jsx("div",{className:"overflow-y-auto scrollbar-hide max-h-screen p-1",children:r.jsx("div",{className:"grid grid-cols-4 gap-2",children:n.map(c=>r.jsx(Ke,{pump:c,handleAppendDeliveryData:ke},c.Id))})})},"pumps"),r.jsx(de,{title:"MOP",children:r.jsx(qe,{mopList:o,onSelectMOP:Ve})},"mop"),r.jsx(de,{title:"REPORTS",children:r.jsx(lt,{})},"reports"),r.jsx(de,{title:"CONFIG",children:r.jsx(ot,{})},"config")]})})})]})}),r.jsx(Ze,{isOpen:U,onClose:Se,onCustomerDataChange:(c,x)=>{switch(c){case"name":Y(x);break;case"address":te(x);break;case"tin":G(x);break;case"businessStyle":Z(x);break}},customerName:Q,customerAddress:W,customerTIN:V,customerBusinessStyle:K,onSave:Me,setCustomerName:Y,setCustomerAddress:te,setCustomerTIN:G,setCustomerBusinessStyle:Z}),r.jsx(nt,{isOpen:v,onOpenChange:S,cardNumber:J,setCardNumber:F,approvalCode:M,setApprovalCode:$,cardHolderName:A,setCardHolderName:q,onSave:async()=>{if(!J||!M||!A){u.error("Please fill in all card details.");return}S(!1),await ve()}})]})}export{Ps as default};
