import{r as t,j as e}from"./app-n36vVTPw.js";import{S as A,l as N,a as B,b as c}from"./index-eUkX702n.js";import{u as H}from"./index-Bd6axV7r.js";import{m as O,a as b,b as M,c as g,d as D}from"./chunk-P2T5LMDM-DZ2omyt5.js";import{c as a}from"./chunk-H4VOEXHF-CIerkNbz.js";import{b as S}from"./chunk-DBLREEYE-DsyCbxuc.js";import{c as K}from"./chunk-J333S7JQ-B_k3DFh5.js";import{d as L}from"./chunk-44JHHBS2-B2yHAC2s.js";import"./chunk-N2KXC5ZE-Dvubd9oX.js";import"./chunk-XHQUSKIE-DurFZmLo.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./useFocusable-BSFbFbJ7.js";import"./SelectionManager-Mzy0TgGM.js";import"./FocusScope--R9rqcsT.js";import"./scrollIntoView-DeP1hHqy.js";import"./useControlledState-pJW3fiyf.js";import"./useLabel-Cq0GkGCJ.js";import"./useLabels-BYFFHVAx.js";import"./useCollator-CBdADFcE.js";import"./useListState-CqYFETzy.js";import"./chunk-RQNQ5XFG-BUtyfjwu.js";import"./iconBase-BVOvUb33.js";import"./index-Cxc5vKLe.js";import"./index-DADyRLNe.js";import"./getScrollParent-PAEJV1DV.js";import"./VisuallyHidden-DMb5cN1n.js";import"./chunk-6NL67ZRH-DSizpE0E.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";const $=[{MOP_ID:1,MOP_Name:"Zero-Rated",content:"More details about Zero-Rated."},{MOP_ID:2,MOP_Name:"Discounts",content:"More details about Discounts."},{MOP_ID:3,MOP_Name:"Redemption",content:"More details about Redemption."}],Pe=({mopList:d,onSelectMOP:v})=>{const[m,i]=t.useState(!1),[r,x]=t.useState(null),[n,o]=t.useState(!1),[h,y]=t.useState([]),[l,C]=t.useState(null),[u,f]=t.useState([]),[w,p]=t.useState(!1),{isOpen:R,onOpen:I,onClose:j}=H(),E=()=>{i(!0)},k=s=>{m&&i(!1),v(s)},F=s=>{s.MOP_Name==="Discounts"?(x(s),o(!0),T()):(x(s),I())},T=async()=>{p(!0);try{const _=await(await fetch("/get-discount")).json();if(y(_),l){const P=_.find(z=>z.discount_id===l.discount_id);f(P?P.presets:[])}}catch(s){console.error("Error fetching discounts:",s)}finally{p(!1)}},Z=s=>{C(s),f(s.presets)};return e.jsxs("div",{className:"relative",children:[m?e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[$.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>F(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:()=>i(!1),className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"BACK TO MOP"})})})]}):e.jsx("div",{className:"grid grid-cols-4 gap-2",children:d.length>0?e.jsxs(e.Fragment,{children:[d.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>k(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:E,className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"OTHER MOP"})})})]}):e.jsxs("div",{className:"col-span-4 flex flex-col items-center justify-center py-12 text-xl font-extrabold text-center text-red-500",children:[e.jsx(A,{className:"text-7xl"}),"No payment method found!"]})}),r&&!n&&e.jsx(O,{isOpen:R,onOpenChange:j,children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"flex flex-col gap-1",children:r.MOP_Name}),e.jsx(g,{children:r.content}),e.jsx(D,{children:e.jsx(S,{color:"danger",variant:"light",onPress:j,children:"Close"})})]})})}),n&&e.jsx(O,{size:"5xl",isOpen:n,onOpenChange:()=>o(!1),children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"text-xl font-extrabold",children:r.MOP_Name}),e.jsxs(g,{className:"grid grid-cols-2 gap-2",children:[w?e.jsx("div",{children:"Loading discounts..."}):e.jsx(a,{children:e.jsx(N,{"aria-label":"Discounts",children:e.jsx(B,{title:"Select Discount",children:h.length>0?h.map(s=>e.jsx(c,{onClick:()=>Z(s),className:`${(l==null?void 0:l.discount_id)===s.discount_id?"bg-primary text-white":"bg-white"}`,children:s.discount_name},s.discount_id)):e.jsx(c,{children:"No discounts available"},"no-discounts")})})}),u.length>0?e.jsxs(a,{className:"p-2",children:[e.jsx(K,{className:"text-xl font-extrabold",children:l.discount_name}),e.jsx(N,{"aria-label":"Presets",children:u.map(s=>e.jsx(c,{children:s.preset_name},s.preset_id))})]}):e.jsx(a,{className:"p-2 h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl font-extrabold",children:"Please select a discount"})})})]}),e.jsx(L,{}),e.jsx(D,{children:e.jsx(S,{color:"danger",onPress:()=>o(!1),children:"Close"})})]})})})]})};export{Pe as default};
