import{r as t,j as e}from"./app-BUG5qQgz.js";import{S as A,l as N,a as B,b as c}from"./index-CO2UKFxL.js";import{u as H}from"./index-CtJxStzx.js";import{m as O,a as b,b as M,c as g,d as D}from"./chunk-P2T5LMDM-BEPxiFxU.js";import{c as a}from"./chunk-H4VOEXHF-Cs_P-1nP.js";import{b as S}from"./chunk-DBLREEYE-B5NiI8dN.js";import{c as K}from"./chunk-J333S7JQ-TPYNH44Z.js";import{d as L}from"./chunk-44JHHBS2-BroMj0ST.js";import"./chunk-N2KXC5ZE-CQEZCh9j.js";import"./chunk-XHQUSKIE-Bem5Pt0d.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./useFocusable-DwsmypTm.js";import"./SelectionManager-JLJjMtU7.js";import"./FocusScope-C6FvHQAC.js";import"./useControlledState-B_gnQ3BU.js";import"./useLabel-BKx4Tw7f.js";import"./useLabels-RZusGEFa.js";import"./index-B_MqmxIX.js";import"./index-6nIXNlBn.js";import"./useListState-FbDYzdHk.js";import"./chunk-RQNQ5XFG-CCe9qDU2.js";import"./iconBase-Bj9fiJUE.js";import"./getScrollParent-etvEhCeC.js";import"./VisuallyHidden-VblXzB80.js";import"./chunk-6NL67ZRH-jV9lOtVq.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";const $=[{MOP_ID:1,MOP_Name:"Zero-Rated",content:"More details about Zero-Rated."},{MOP_ID:2,MOP_Name:"Discounts",content:"More details about Discounts."},{MOP_ID:3,MOP_Name:"Redemption",content:"More details about Redemption."}],je=({mopList:d,onSelectMOP:v})=>{const[x,n]=t.useState(!1),[r,m]=t.useState(null),[i,o]=t.useState(!1),[h,y]=t.useState([]),[l,C]=t.useState(null),[u,f]=t.useState([]),[w,p]=t.useState(!1),{isOpen:R,onOpen:I,onClose:j}=H(),E=()=>{n(!0)},k=s=>{x&&n(!1),v(s)},F=s=>{s.MOP_Name==="Discounts"?(m(s),o(!0),T()):(m(s),I())},T=async()=>{p(!0);try{const _=await(await fetch("/get-discount")).json();if(y(_),l){const P=_.find(z=>z.discount_id===l.discount_id);f(P?P.presets:[])}}catch(s){console.error("Error fetching discounts:",s)}finally{p(!1)}},Z=s=>{C(s),f(s.presets)};return e.jsxs("div",{className:"relative",children:[x?e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[$.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>F(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:()=>n(!1),className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"BACK TO MOP"})})})]}):e.jsx("div",{className:"grid grid-cols-4 gap-2",children:d.length>0?e.jsxs(e.Fragment,{children:[d.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>k(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:E,className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"OTHER MOP"})})})]}):e.jsxs("div",{className:"col-span-4 flex flex-col items-center justify-center py-12 text-xl font-extrabold text-center text-red-500",children:[e.jsx(A,{className:"text-7xl"}),"No payment method found!"]})}),r&&!i&&e.jsx(O,{isOpen:R,onOpenChange:j,children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"flex flex-col gap-1",children:r.MOP_Name}),e.jsx(g,{children:r.content}),e.jsx(D,{children:e.jsx(S,{color:"danger",variant:"light",onPress:j,children:"Close"})})]})})}),i&&e.jsx(O,{size:"5xl",isOpen:i,onOpenChange:()=>o(!1),children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"text-xl font-extrabold",children:r.MOP_Name}),e.jsxs(g,{className:"grid grid-cols-2 gap-2",children:[w?e.jsx("div",{children:"Loading discounts..."}):e.jsx(a,{children:e.jsx(N,{"aria-label":"Discounts",children:e.jsx(B,{title:"Select Discount",children:h.length>0?h.map(s=>e.jsx(c,{onClick:()=>Z(s),className:`${(l==null?void 0:l.discount_id)===s.discount_id?"bg-primary text-white":"bg-white"}`,children:s.discount_name},s.discount_id)):e.jsx(c,{children:"No discounts available"},"no-discounts")})})}),u.length>0?e.jsxs(a,{className:"p-2",children:[e.jsx(K,{className:"text-xl font-extrabold",children:l.discount_name}),e.jsx(N,{"aria-label":"Presets",children:u.map(s=>e.jsx(c,{children:s.preset_name},s.preset_id))})]}):e.jsx(a,{className:"p-2 h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl font-extrabold",children:"Please select a discount"})})})]}),e.jsx(L,{}),e.jsx(D,{children:e.jsx(S,{color:"danger",onPress:()=>o(!1),children:"Close"})})]})})})]})};export{je as default};
