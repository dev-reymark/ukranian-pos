import{r as t,j as e}from"./app-gd-uqgpx.js";import{S as A,l as N,a as B,b as c}from"./index-B0kDKqzM.js";import{u as H}from"./index-CKxNtWa9.js";import{m as O,a as b,b as M,c as g,d as D}from"./chunk-P2T5LMDM-BVuwJLL5.js";import{c as a}from"./chunk-H4VOEXHF-CICjFjfh.js";import{b as S}from"./chunk-DBLREEYE-CKQEL9mw.js";import{c as K}from"./chunk-J333S7JQ-C1sCWx8Y.js";import{d as L}from"./chunk-44JHHBS2-CjlA9ToN.js";import"./chunk-N2KXC5ZE-Bj2M6wFk.js";import"./chunk-XHQUSKIE-Bnfx5sT7.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./useFocusable-CyjXiWMo.js";import"./index-D0nWQ7S0.js";import"./FocusScope-C6RuppuL.js";import"./useControlledState-CGYuqEhB.js";import"./index-BlbpdQFg.js";import"./useLabel-DtnyFHRQ.js";import"./useLabels-BH-okUBZ.js";import"./useListState-CQKsSTsu.js";import"./chunk-RQNQ5XFG-DzTSHNFR.js";import"./iconBase-DDKu0rpZ.js";import"./VisuallyHidden-D7GdU6RZ.js";import"./chunk-6NL67ZRH-BQd8oPEx.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";const $=[{MOP_ID:1,MOP_Name:"Zero-Rated",content:"More details about Zero-Rated."},{MOP_ID:2,MOP_Name:"Discounts",content:"More details about Discounts."},{MOP_ID:3,MOP_Name:"Redemption",content:"More details about Redemption."}],fe=({mopList:d,onSelectMOP:v})=>{const[x,r]=t.useState(!1),[n,m]=t.useState(null),[i,o]=t.useState(!1),[h,y]=t.useState([]),[l,C]=t.useState(null),[u,f]=t.useState([]),[w,p]=t.useState(!1),{isOpen:R,onOpen:I,onClose:j}=H(),E=()=>{r(!0)},k=s=>{x&&r(!1),v(s)},F=s=>{s.MOP_Name==="Discounts"?(m(s),o(!0),T()):(m(s),I())},T=async()=>{p(!0);try{const _=await(await fetch("/get-discount")).json();if(y(_),l){const P=_.find(z=>z.discount_id===l.discount_id);f(P?P.presets:[])}}catch(s){console.error("Error fetching discounts:",s)}finally{p(!1)}},Z=s=>{C(s),f(s.presets)};return e.jsxs("div",{className:"relative",children:[x?e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[$.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>F(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:()=>r(!1),className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"BACK TO MOP"})})})]}):e.jsx("div",{className:"grid grid-cols-4 gap-2",children:d.length>0?e.jsxs(e.Fragment,{children:[d.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>k(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:E,className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"OTHER MOP"})})})]}):e.jsxs("div",{className:"col-span-4 flex flex-col items-center justify-center py-12 text-xl font-extrabold text-center text-red-500",children:[e.jsx(A,{className:"text-7xl"}),"No payment method found!"]})}),n&&!i&&e.jsx(O,{isOpen:R,onOpenChange:j,children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"flex flex-col gap-1",children:n.MOP_Name}),e.jsx(g,{children:n.content}),e.jsx(D,{children:e.jsx(S,{color:"danger",variant:"light",onPress:j,children:"Close"})})]})})}),i&&e.jsx(O,{size:"5xl",isOpen:i,onOpenChange:()=>o(!1),children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"text-xl font-extrabold",children:n.MOP_Name}),e.jsxs(g,{className:"grid grid-cols-2 gap-2",children:[w?e.jsx("div",{children:"Loading discounts..."}):e.jsx(a,{children:e.jsx(N,{"aria-label":"Discounts",children:e.jsx(B,{title:"Select Discount",children:h.length>0?h.map(s=>e.jsx(c,{onClick:()=>Z(s),className:`${(l==null?void 0:l.discount_id)===s.discount_id?"bg-primary text-white":"bg-white"}`,children:s.discount_name},s.discount_id)):e.jsx(c,{children:"No discounts available"},"no-discounts")})})}),u.length>0?e.jsxs(a,{className:"p-2",children:[e.jsx(K,{className:"text-xl font-extrabold",children:l.discount_name}),e.jsx(N,{"aria-label":"Presets",children:u.map(s=>e.jsx(c,{children:s.preset_name},s.preset_id))})]}):e.jsx(a,{className:"p-2 h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl font-extrabold",children:"Please select a discount"})})})]}),e.jsx(L,{}),e.jsx(D,{children:e.jsx(S,{color:"danger",onPress:()=>o(!1),children:"Close"})})]})})})]})};export{fe as default};
