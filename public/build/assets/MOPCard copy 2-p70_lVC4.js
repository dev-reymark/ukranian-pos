import{r as t,j as e,c as a,a as A}from"./app-DJ0OCxwK.js";import{S as B,l as N,a as H,b as o}from"./index-BOPwCyX4.js";import{u as K}from"./index-2TX6XvHX.js";import{m as O,a as b,b as M,c as g,d as D}from"./chunk-P2T5LMDM-BSwoEP5i.js";import{b as S}from"./chunk-DBLREEYE-C6Vwu_wX.js";import{d as L}from"./chunk-44JHHBS2-CWPKxyw1.js";import"./SelectionManager-CiNkBuTg.js";import"./FocusScope-C3BCnoq3.js";import"./scrollIntoView-D_ErU28Z.js";import"./useControlledState-DF6__fTM.js";import"./useLabel-BEN_EtuV.js";import"./useLabels-C7uuHIf4.js";import"./useCollator-BqR0K-ta.js";import"./useListState-BnYXW82J.js";import"./iconBase-BN3XEKHS.js";import"./index-3GMhIGNj.js";import"./getScrollParent-CTiUb1E9.js";import"./VisuallyHidden-D0N98OxW.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";const $=[{MOP_ID:1,MOP_Name:"Zero-Rated",content:"More details about Zero-Rated."},{MOP_ID:2,MOP_Name:"Discounts",content:"More details about Discounts."},{MOP_ID:3,MOP_Name:"Redemption",content:"More details about Redemption."}],de=({mopList:d,onSelectMOP:v})=>{const[x,r]=t.useState(!1),[n,m]=t.useState(null),[i,c]=t.useState(!1),[h,y]=t.useState([]),[l,C]=t.useState(null),[u,f]=t.useState([]),[w,j]=t.useState(!1),{isOpen:R,onOpen:I,onClose:p}=K(),E=()=>{r(!0)},k=s=>{x&&r(!1),v(s)},F=s=>{s.MOP_Name==="Discounts"?(m(s),c(!0),T()):(m(s),I())},T=async()=>{j(!0);try{const _=await(await fetch("/get-discount")).json();if(y(_),l){const P=_.find(z=>z.discount_id===l.discount_id);f(P?P.presets:[])}}catch(s){console.error("Error fetching discounts:",s)}finally{j(!1)}},Z=s=>{C(s),f(s.presets)};return e.jsxs("div",{className:"relative",children:[x?e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[$.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>F(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:()=>r(!1),className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"BACK TO MOP"})})})]}):e.jsx("div",{className:"grid grid-cols-4 gap-2",children:d.length>0?e.jsxs(e.Fragment,{children:[d.map(s=>e.jsx(a,{shadow:"sm",isPressable:!0,onPress:()=>k(s),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:s.MOP_Name.trim()})})},s.MOP_ID)),e.jsx(a,{isPressable:!0,onPress:E,className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"OTHER MOP"})})})]}):e.jsxs("div",{className:"col-span-4 flex flex-col items-center justify-center py-12 text-xl font-extrabold text-center text-red-500",children:[e.jsx(B,{className:"text-7xl"}),"No payment method found!"]})}),n&&!i&&e.jsx(O,{isOpen:R,onOpenChange:p,children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"flex flex-col gap-1",children:n.MOP_Name}),e.jsx(g,{children:n.content}),e.jsx(D,{children:e.jsx(S,{color:"danger",variant:"light",onPress:p,children:"Close"})})]})})}),i&&e.jsx(O,{size:"5xl",isOpen:i,onOpenChange:()=>c(!1),children:e.jsx(b,{children:e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"text-xl font-extrabold",children:n.MOP_Name}),e.jsxs(g,{className:"grid grid-cols-2 gap-2",children:[w?e.jsx("div",{children:"Loading discounts..."}):e.jsx(a,{children:e.jsx(N,{"aria-label":"Discounts",children:e.jsx(H,{title:"Select Discount",children:h.length>0?h.map(s=>e.jsx(o,{onClick:()=>Z(s),className:`${(l==null?void 0:l.discount_id)===s.discount_id?"bg-primary text-white":"bg-white"}`,children:s.discount_name},s.discount_id)):e.jsx(o,{children:"No discounts available"},"no-discounts")})})}),u.length>0?e.jsxs(a,{className:"p-2",children:[e.jsx(A,{className:"text-xl font-extrabold",children:l.discount_name}),e.jsx(N,{"aria-label":"Presets",children:u.map(s=>e.jsx(o,{children:s.preset_name},s.preset_id))})]}):e.jsx(a,{className:"p-2 h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl font-extrabold",children:"Please select a discount"})})})]}),e.jsx(L,{}),e.jsx(D,{children:e.jsx(S,{color:"danger",onPress:()=>c(!1),children:"Close"})})]})})})]})};export{de as default};
