import{u as L,r as n,j as e}from"./app-C7tOZ9mb.js";import{S as U,l as D,a as q,b as N}from"./index-ZaNz1KS8.js";import{t as G,m as J,o as Q,c as v,d as W,f as X}from"./chunk-N2KXC5ZE-D_CJACt4.js";import{u as Y}from"./index-zZ1N3Ar2.js";import{c as m}from"./chunk-H4VOEXHF-DsCNIOMn.js";import{m as k,a as w,b as R,c as I,d as A}from"./chunk-P2T5LMDM-TL1Zznnc.js";import{b as E}from"./chunk-DBLREEYE-DuqTpBYd.js";import{c as ee}from"./chunk-J333S7JQ-D84yUmgV.js";import{d as te}from"./chunk-44JHHBS2-CNILBaGe.js";import"./chunk-XHQUSKIE-DH6WFa3x.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./useFocusable-BwCCJFar.js";import"./SelectionManager-BZLHT_u-.js";import"./FocusScope-BYVYjJmQ.js";import"./scrollIntoView-DvDgV4U_.js";import"./useControlledState-Cpz1NFEK.js";import"./useLabel-DyLhekMM.js";import"./useLabels-RMseU24M.js";import"./useCollator-CbQycZuf.js";import"./useListState-DOzEYPYb.js";import"./chunk-RQNQ5XFG-EKoFrFia.js";import"./iconBase-DhBb1r-v.js";import"./index-B43NX_O7.js";import"./index-cynRN4w3.js";import"./chunk-6NL67ZRH-BrjaCyLg.js";import"./getScrollParent-CdIc2hyL.js";import"./VisuallyHidden-DbICzycp.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";var T=G({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300 before:transition-opacity before:!duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}});function se(o){var u,l;const r=L(),[i,a]=J(o,T.variantKeys),{as:b,children:f,isLoaded:x=!1,className:j,classNames:c,...s}=i,g=b||"div",p=(l=(u=o.disableAnimation)!=null?u:r==null?void 0:r.disableAnimation)!=null?l:!1,h=n.useMemo(()=>T({...a,disableAnimation:p}),[Q(a),p,f]),P=v(c==null?void 0:c.base,j);return{Component:g,children:f,slots:h,classNames:c,getSkeletonProps:(d={})=>({"data-loaded":W(x),className:h.base({class:v(P,d==null?void 0:d.className)}),...s}),getContentProps:(d={})=>({className:h.content({class:v(c==null?void 0:c.content,d==null?void 0:d.className)})})}}var F=X((o,u)=>{const{Component:l,children:r,getSkeletonProps:i,getContentProps:a}=se({...o});return e.jsx(l,{ref:u,...i(),children:e.jsx("div",{...a(),children:r})})});F.displayName="NextUI.Skeleton";var O=F;const ae=[{MOP_ID:1,MOP_Name:"Zero-Rated",content:"More details about Zero-Rated."},{MOP_ID:2,MOP_Name:"Discounts",content:"More details about Discounts."},{MOP_ID:3,MOP_Name:"Redemption",content:"More details about Redemption."}],ne=({mopList:o,onSelectMOP:u,onApplyDiscount:l})=>{const[r,i]=n.useState(!1),[a,b]=n.useState(null),[f,x]=n.useState(!1),[j,c]=n.useState([]),[s,g]=n.useState(null),[p,h]=n.useState([]),[P,_]=n.useState(!1),{isOpen:M,onOpen:d,onClose:y}=Y(),V=()=>{i(!0)},z=t=>{r&&i(!1),u(t)},K=t=>{t.MOP_Name==="Discounts"?(b(t),x(!0),Z()):(b(t),d())},Z=async()=>{_(!0);try{const S=await(await fetch("/get-discount")).json();if(c(S),s){const C=S.find(H=>H.discount_id===s.discount_id);h(C?C.presets:[])}}catch(t){console.error("Error fetching discounts:",t)}finally{_(!1)}},$=t=>{g(t),h(t.presets)},B=t=>{s&&l&&(console.log("Selected Discount:",s),console.log("Selected Discount Type:",s.discount_type),console.log("Selected Preset:",t),console.log("Preset Value:",t.preset_value),l(s,t)),x(!1)};return e.jsxs("div",{className:"relative",children:[r?e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[ae.map(t=>e.jsx(m,{shadow:"sm",isPressable:!0,onPress:()=>K(t),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:t.MOP_Name.trim()})})},t.MOP_ID)),e.jsx(m,{isPressable:!0,onPress:()=>i(!1),className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"BACK TO MOP"})})})]}):e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.length>0?e.jsx(e.Fragment,{children:o.map(t=>e.jsx(m,{shadow:"sm",isPressable:!0,onPress:()=>z(t),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:t.MOP_Name.trim()})})},t.MOP_ID))}):e.jsxs("div",{className:"col-span-4 flex flex-col items-center justify-center py-12 text-xl font-extrabold text-center text-red-500",children:[e.jsx(U,{className:"text-7xl"}),"No payment method found!"]}),e.jsx(m,{isPressable:!0,onPress:V,className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"OTHER MOP"})})})]}),a&&!f&&e.jsx(k,{isOpen:M,onOpenChange:y,children:e.jsx(w,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"flex flex-col gap-1",children:a.MOP_Name}),e.jsx(I,{children:a.content}),e.jsx(A,{children:e.jsx(E,{color:"danger",variant:"light",onPress:y,children:"Close"})})]})})}),f&&e.jsx(k,{size:"5xl",isOpen:f,onOpenChange:()=>x(!1),children:e.jsx(w,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"text-xl font-extrabold",children:a.MOP_Name}),e.jsxs(I,{className:"grid grid-cols-2 gap-2",children:[P?e.jsxs("div",{className:"max-w-[300px] w-full flex items-center gap-3",children:[e.jsx("div",{children:e.jsx(O,{className:"flex rounded-full w-12 h-12"})}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx(O,{className:"h-3 w-3/5 rounded-lg"}),e.jsx(O,{className:"h-3 w-4/5 rounded-lg"})]})]}):e.jsx(m,{children:e.jsx(D,{"aria-label":"Discounts",children:e.jsx(q,{title:"Select Discount",children:j.length>0?j.map(t=>e.jsx(N,{onClick:()=>$(t),className:`${(s==null?void 0:s.discount_id)===t.discount_id?"bg-primary text-white":"bg-white"}`,children:t.discount_name},t.discount_id)):e.jsx(N,{children:"No discounts available"},"no-discounts")})})}),p.length>0?e.jsxs(m,{className:"p-2",children:[e.jsx(ee,{className:"text-xl font-extrabold",children:s.discount_name}),e.jsx(D,{"aria-label":"Presets",children:p.map(t=>e.jsx(N,{onClick:()=>B(t),children:t.preset_name},t.preset_id))})]}):e.jsx(m,{className:"p-2 h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl font-extrabold",children:"Please select a discount"})})})]}),e.jsx(te,{}),e.jsx(A,{children:e.jsx(E,{color:"danger",onPress:()=>x(!1),children:"Close"})})]})})})]})},Ie=ne;export{Ie as default};
