import{t as L,u as U,m as q,r as n,o as G,i as N,l as J,f as Q,j as e,c as u,a as W}from"./app-DQR8ouMN.js";import{S as X,l as D,a as Y,b as v}from"./index-BMtfhCBw.js";import{u as ee}from"./index-F91XIcke.js";import{m as w,a as k,b as R,c as I,d as A}from"./chunk-P2T5LMDM-MUOmPblZ.js";import{b as E}from"./chunk-DBLREEYE-CoXvdbmO.js";import{d as te}from"./chunk-44JHHBS2-BSFQFpH5.js";import"./SelectionManager-yDbbLw-S.js";import"./FocusScope-DMt3cHMA.js";import"./scrollIntoView-B1mZhU84.js";import"./useControlledState-DsOKAyM-.js";import"./useLabel-BpByWgep.js";import"./useLabels-CSRCNtbm.js";import"./useCollator-5Zmd5rxj.js";import"./useListState-DtcGX6Bb.js";import"./iconBase-ClxmNH_N.js";import"./index-goXRPerO.js";import"./getScrollParent-CSIo9Hxx.js";import"./VisuallyHidden-DiWMGts7.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";var T=L({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300 before:transition-opacity before:!duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}});function se(o){var f,l;const r=U(),[i,a]=q(o,T.variantKeys),{as:b,children:m,isLoaded:x=!1,className:j,classNames:c,...s}=i,g=b||"div",p=(l=(f=o.disableAnimation)!=null?f:r==null?void 0:r.disableAnimation)!=null?l:!1,h=n.useMemo(()=>T({...a,disableAnimation:p}),[G(a),p,m]),P=N(c==null?void 0:c.base,j);return{Component:g,children:m,slots:h,classNames:c,getSkeletonProps:(d={})=>({"data-loaded":J(x),className:h.base({class:N(P,d==null?void 0:d.className)}),...s}),getContentProps:(d={})=>({className:h.content({class:N(c==null?void 0:c.content,d==null?void 0:d.className)})})}}var F=Q((o,f)=>{const{Component:l,children:r,getSkeletonProps:i,getContentProps:a}=se({...o});return e.jsx(l,{ref:f,...i(),children:e.jsx("div",{...a(),children:r})})});F.displayName="NextUI.Skeleton";var O=F;const ae=[{MOP_ID:1,MOP_Name:"Zero-Rated",content:"More details about Zero-Rated."},{MOP_ID:2,MOP_Name:"Discounts",content:"More details about Discounts."},{MOP_ID:3,MOP_Name:"Redemption",content:"More details about Redemption."}],ne=({mopList:o,onSelectMOP:f,onApplyDiscount:l})=>{const[r,i]=n.useState(!1),[a,b]=n.useState(null),[m,x]=n.useState(!1),[j,c]=n.useState([]),[s,g]=n.useState(null),[p,h]=n.useState([]),[P,_]=n.useState(!1),{isOpen:M,onOpen:d,onClose:y}=ee(),V=()=>{i(!0)},z=t=>{r&&i(!1),f(t)},K=t=>{t.MOP_Name==="Discounts"?(b(t),x(!0),Z()):(b(t),d())},Z=async()=>{_(!0);try{const S=await(await fetch("/get-discount")).json();if(c(S),s){const C=S.find(H=>H.discount_id===s.discount_id);h(C?C.presets:[])}}catch(t){console.error("Error fetching discounts:",t)}finally{_(!1)}},$=t=>{g(t),h(t.presets)},B=t=>{s&&l&&(console.log("Selected Discount:",s),console.log("Selected Discount Type:",s.discount_type),console.log("Selected Preset:",t),console.log("Preset Value:",t.preset_value),l(s,t)),x(!1)};return e.jsxs("div",{className:"relative",children:[r?e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[ae.map(t=>e.jsx(u,{shadow:"sm",isPressable:!0,onPress:()=>K(t),className:"p-2 h-[150px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:t.MOP_Name.trim()})})},t.MOP_ID)),e.jsx(u,{isPressable:!0,onPress:()=>i(!1),className:"fixed bottom-5 p-2 h-[150px] bg-default",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"BACK TO MOP"})})})]}):e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.length>0?e.jsx(e.Fragment,{children:o.map(t=>e.jsx(u,{shadow:"sm",isPressable:!0,onPress:()=>z(t),className:"p-2 w-full h-[100px]",children:e.jsx("div",{className:"flex justify-center items-center text-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:t.MOP_Name.trim()})})},t.MOP_ID))}):e.jsxs("div",{className:"col-span-4 flex flex-col items-center justify-center py-12 text-xl font-extrabold text-center text-red-500",children:[e.jsx(X,{className:"text-7xl"}),"No payment method found!"]}),e.jsx(u,{isPressable:!0,onPress:V,className:"fixed bottom-5 p-2 h-[150px] bg-default",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"OTHER MOP"})})})]}),a&&!m&&e.jsx(w,{isOpen:M,onOpenChange:y,children:e.jsx(k,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"flex flex-col gap-1",children:a.MOP_Name}),e.jsx(I,{children:a.content}),e.jsx(A,{children:e.jsx(E,{color:"danger",variant:"light",onPress:y,children:"Close"})})]})})}),m&&e.jsx(w,{size:"5xl",isOpen:m,onOpenChange:()=>x(!1),children:e.jsx(k,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"text-xl font-extrabold",children:a.MOP_Name}),e.jsxs(I,{className:"grid grid-cols-2 gap-2",children:[P?e.jsxs("div",{className:"max-w-[300px] w-full flex items-center gap-3",children:[e.jsx("div",{children:e.jsx(O,{className:"flex rounded-full w-12 h-12"})}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx(O,{className:"h-3 w-3/5 rounded-lg"}),e.jsx(O,{className:"h-3 w-4/5 rounded-lg"})]})]}):e.jsx(u,{children:e.jsx(D,{"aria-label":"Discounts",children:e.jsx(Y,{title:"Select Discount",children:j.length>0?j.map(t=>e.jsx(v,{onClick:()=>$(t),className:`${(s==null?void 0:s.discount_id)===t.discount_id?"bg-primary text-white":"bg-white"}`,children:t.discount_name},t.discount_id)):e.jsx(v,{children:"No discounts available"},"no-discounts")})})}),p.length>0?e.jsxs(u,{className:"p-2",children:[e.jsx(W,{className:"text-xl font-extrabold",children:s.discount_name}),e.jsx(D,{"aria-label":"Presets",children:p.map(t=>e.jsx(v,{onClick:()=>B(t),children:t.preset_name},t.preset_id))})]}):e.jsx(u,{className:"p-2 h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl font-extrabold",children:"Please select a discount"})})})]}),e.jsx(te,{}),e.jsx(A,{children:e.jsx(E,{color:"danger",onPress:()=>x(!1),children:"Close"})})]})})})]})},Oe=ne;export{Oe as default};
