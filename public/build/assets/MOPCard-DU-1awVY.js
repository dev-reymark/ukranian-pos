import{u as B,r,j as e}from"./app-gd-uqgpx.js";import{S as H,l as D,a as L,b as g}from"./index-B0kDKqzM.js";import{t as U,m as q,o as G,c as P,d as J,f as Q}from"./chunk-N2KXC5ZE-Bj2M6wFk.js";import{u as W}from"./index-CKxNtWa9.js";import{c as d}from"./chunk-H4VOEXHF-CICjFjfh.js";import{m as C,a as w,b as k,c as R,d as A}from"./chunk-P2T5LMDM-BVuwJLL5.js";import{b as I}from"./chunk-DBLREEYE-CKQEL9mw.js";import{c as X}from"./chunk-J333S7JQ-C1sCWx8Y.js";import{d as Y}from"./chunk-44JHHBS2-CjlA9ToN.js";import"./chunk-XHQUSKIE-Bnfx5sT7.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./useFocusable-CyjXiWMo.js";import"./index-D0nWQ7S0.js";import"./FocusScope-C6RuppuL.js";import"./useControlledState-CGYuqEhB.js";import"./index-BlbpdQFg.js";import"./useLabel-DtnyFHRQ.js";import"./useLabels-BH-okUBZ.js";import"./useListState-CQKsSTsu.js";import"./chunk-RQNQ5XFG-DzTSHNFR.js";import"./iconBase-DDKu0rpZ.js";import"./chunk-6NL67ZRH-BQd8oPEx.js";import"./VisuallyHidden-D7GdU6RZ.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";var E=U({slots:{base:["group","relative","overflow-hidden","bg-content3 dark:bg-content2","pointer-events-none","before:opacity-100","before:absolute","before:inset-0","before:-translate-x-full","before:animate-[shimmer_2s_infinite]","before:border-t","before:border-content4/30","before:bg-gradient-to-r","before:from-transparent","before:via-content4","dark:before:via-default-700/10","before:to-transparent","after:opacity-100","after:absolute","after:inset-0","after:-z-10","after:bg-content3","dark:after:bg-content2","data-[loaded=true]:pointer-events-auto","data-[loaded=true]:overflow-visible","data-[loaded=true]:!bg-transparent","data-[loaded=true]:before:opacity-0 data-[loaded=true]:before:animate-none","data-[loaded=true]:after:opacity-0"],content:["opacity-0","group-data-[loaded=true]:opacity-100"]},variants:{disableAnimation:{true:{base:"before:animate-none before:transition-none after:transition-none",content:"transition-none"},false:{base:"transition-background !duration-300 before:transition-opacity before:!duration-300",content:"transition-opacity motion-reduce:transition-none !duration-300"}}},defaultVariants:{}});function ee(l){var m,i;const a=B(),[n,c]=q(l,E.variantKeys),{as:u,children:f,isLoaded:p=!1,className:N,classNames:s,..._}=n,b=u||"div",x=(i=(m=l.disableAnimation)!=null?m:a==null?void 0:a.disableAnimation)!=null?i:!1,h=r.useMemo(()=>E({...c,disableAnimation:x}),[G(c),x,f]),j=P(s==null?void 0:s.base,N);return{Component:b,children:f,slots:h,classNames:s,getSkeletonProps:(o={})=>({"data-loaded":J(p),className:h.base({class:P(j,o==null?void 0:o.className)}),..._}),getContentProps:(o={})=>({className:h.content({class:P(s==null?void 0:s.content,o==null?void 0:o.className)})})}}var F=Q((l,m)=>{const{Component:i,children:a,getSkeletonProps:n,getContentProps:c}=ee({...l});return e.jsx(i,{ref:m,...n(),children:e.jsx("div",{...c(),children:a})})});F.displayName="NextUI.Skeleton";var v=F;const te=[{MOP_ID:1,MOP_Name:"Zero-Rated",content:"More details about Zero-Rated."},{MOP_ID:2,MOP_Name:"Discounts",content:"More details about Discounts."},{MOP_ID:3,MOP_Name:"Redemption",content:"More details about Redemption."}],se=({mopList:l,onSelectMOP:m})=>{const[i,a]=r.useState(!1),[n,c]=r.useState(null),[u,f]=r.useState(!1),[p,N]=r.useState([]),[s,_]=r.useState(null),[b,x]=r.useState([]),[h,j]=r.useState(!1),{isOpen:O,onOpen:M,onClose:o}=W(),T=()=>{a(!0)},z=t=>{i&&a(!1),m(t)},K=t=>{t.MOP_Name==="Discounts"?(c(t),f(!0),V()):(c(t),M())},V=async()=>{j(!0);try{const y=await(await fetch("/get-discount")).json();if(N(y),s){const S=y.find($=>$.discount_id===s.discount_id);x(S?S.presets:[])}}catch(t){console.error("Error fetching discounts:",t)}finally{j(!1)}},Z=t=>{_(t),x(t.presets)};return e.jsxs("div",{className:"relative",children:[i?e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[te.map(t=>e.jsx(d,{shadow:"sm",isPressable:!0,onPress:()=>K(t),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:t.MOP_Name.trim()})})},t.MOP_ID)),e.jsx(d,{isPressable:!0,onPress:()=>a(!1),className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"BACK TO MOP"})})})]}):e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[l.length>0?e.jsx(e.Fragment,{children:l.map(t=>e.jsx(d,{shadow:"sm",isPressable:!0,onPress:()=>z(t),className:"p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:t.MOP_Name.trim()})})},t.MOP_ID))}):e.jsxs("div",{className:"col-span-4 flex flex-col items-center justify-center py-12 text-xl font-extrabold text-center text-red-500",children:[e.jsx(H,{className:"text-7xl"}),"No payment method found!"]}),e.jsx(d,{isPressable:!0,onPress:T,className:"fixed bottom-5 p-2 h-[200px]",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("h1",{className:"text-xl font-extrabold",children:"OTHER MOP"})})})]}),n&&!u&&e.jsx(C,{isOpen:O,onOpenChange:o,children:e.jsx(w,{children:e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"flex flex-col gap-1",children:n.MOP_Name}),e.jsx(R,{children:n.content}),e.jsx(A,{children:e.jsx(I,{color:"danger",variant:"light",onPress:o,children:"Close"})})]})})}),u&&e.jsx(C,{size:"5xl",isOpen:u,onOpenChange:()=>f(!1),children:e.jsx(w,{children:e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"text-xl font-extrabold",children:n.MOP_Name}),e.jsxs(R,{className:"grid grid-cols-2 gap-2",children:[h?e.jsxs("div",{className:"max-w-[300px] w-full flex items-center gap-3",children:[e.jsx("div",{children:e.jsx(v,{className:"flex rounded-full w-12 h-12"})}),e.jsxs("div",{className:"w-full flex flex-col gap-2",children:[e.jsx(v,{className:"h-3 w-3/5 rounded-lg"}),e.jsx(v,{className:"h-3 w-4/5 rounded-lg"})]})]}):e.jsx(d,{children:e.jsx(D,{"aria-label":"Discounts",children:e.jsx(L,{title:"Select Discount",children:p.length>0?p.map(t=>e.jsx(g,{onClick:()=>Z(t),className:`${(s==null?void 0:s.discount_id)===t.discount_id?"bg-primary text-white":"bg-white"}`,children:t.discount_name},t.discount_id)):e.jsx(g,{children:"No discounts available"},"no-discounts")})})}),b.length>0?e.jsxs(d,{className:"p-2",children:[e.jsx(X,{className:"text-xl font-extrabold",children:s.discount_name}),e.jsx(D,{"aria-label":"Presets",children:b.map(t=>e.jsx(g,{children:t.preset_name},t.preset_id))})]}):e.jsx(d,{className:"p-2 h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl font-extrabold",children:"Please select a discount"})})})]}),e.jsx(Y,{}),e.jsx(A,{children:e.jsx(I,{color:"danger",onPress:()=>f(!1),children:"Close"})})]})})})]})},Se=se;export{Se as default};
