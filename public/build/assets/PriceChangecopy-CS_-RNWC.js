import{r as s,d as _,j as e,c as i,a as c,b as n}from"./app-DQR8ouMN.js";import{d as $,$ as w,a as A}from"./chunk-RUXXUVWM-CByahhe-.js";import{I as F,_ as R}from"./index-DDrqCaiR.js";import{r as k,a as H}from"./chunk-6TA6N6HF-BuxHpDGw.js";import{m as L,a as V,b as Y,c as z,d as M}from"./chunk-P2T5LMDM-MUOmPblZ.js";import{d}from"./chunk-44JHHBS2-BSFQFpH5.js";import{i as b}from"./chunk-GQQM5TNQ-BZdn_sLp.js";import{b as P}from"./chunk-DBLREEYE-CoXvdbmO.js";import"./useControlledState-DsOKAyM-.js";import"./getScrollParent-CSIo9Hxx.js";import"./FocusScope-DMt3cHMA.js";import"./useFormValidationState-BGLjVBHh.js";import"./scrollIntoView-B1mZhU84.js";import"./useFormReset-DweNStx9.js";import"./useLabels-CSRCNtbm.js";import"./NumberFormatter-DgUnyrzU.js";import"./useCollator-5Zmd5rxj.js";import"./LiveAnnouncer-C2oPZAHC.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";import"./index-X92CTFGl.js";import"./VisuallyHidden-DiWMGts7.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useLabel-BpByWgep.js";import"./chunk-M3MASYO7-DJpgnKTJ.js";function me({isOpen:o,onOpenChange:N}){const[u,G]=s.useState([]),[f,I]=s.useState(null),[v,m]=s.useState(""),[l,x]=s.useState(""),[C,p]=s.useState(!1),[S,h]=s.useState(!1);s.useEffect(()=>{o&&_.get("/get-grades").then(a=>{G(a.data)}).catch(a=>{console.error("Error fetching grades:",a)})},[o]);const D=a=>{var j,g;const r=a.target.value;console.log("Selected Grade ID:",r);const t=u.find(y=>y.Grade_ID===r);console.log("Selected Grade:",t),t&&(console.log("Grade Price Profile:",t.price_profile),console.log("Grade Price:",(j=t.price_profile)==null?void 0:j.Grade_Price),I(t),m(((g=t.price_profile)==null?void 0:g.Grade_Price)||"0"))},E=()=>{if(!f){console.error("No grade selected");return}if(!l){h(!0);return}p(!0),_.put(`/update-price/${f.Grade_ID}`,{newPrice:l}).then(a=>{R.success("Price updated successfully!"),console.log("Price updated successfully:",a.data),m(l),x("")}).catch(a=>{console.error("Error updating price:",a)}).finally(()=>{p(!1),h(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(F,{position:"top-center"}),e.jsx(L,{isDismissable:!1,isKeyboardDismissDisabled:!0,size:"4xl",isOpen:o,onOpenChange:N,hideCloseButton:!0,children:e.jsx(V,{children:a=>e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"flex flex-col gap-1",children:e.jsx("h1",{className:"text-2xl font-extrabold",children:"PRICE CHANGE"})}),e.jsxs(z,{className:"w-full mx-auto p-3",children:[e.jsx($,{variant:"faded",defaultValue:w(A()),label:e.jsx("p",{className:"text-lg font-extrabold",children:"EFFECTIVITY"}),labelPlacement:"outside-left",showMonthAndYearPickers:!0,isDisabled:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsx("h2",{className:"text-xl font-extrabold",children:"Grades"})}),e.jsx(d,{}),e.jsx(n,{className:"p-4",children:e.jsx(k,{label:"Select Grades",onChange:D,children:u.map(r=>e.jsx(H,{className:"text-xl font-semibold",size:"lg",value:r.Grade_ID,children:r.Grade_Name.trim()},r.Grade_ID))})})]}),e.jsxs("div",{className:"grid grid-rows-2 gap-2",children:[e.jsxs(i,{children:[e.jsx(c,{children:e.jsx("h2",{className:"text-xl font-extrabold",children:"Current Price"})}),e.jsx(d,{}),e.jsx(n,{className:"gap-2 p-2",children:e.jsx(b,{variant:"faded",label:"CASH",value:v,isReadOnly:!0})})]}),e.jsxs(i,{children:[e.jsx(c,{children:e.jsx("h2",{className:"text-xl font-extrabold",children:"New Price"})}),e.jsx(d,{}),e.jsx(n,{className:"gap-2 p-2",children:e.jsx(b,{label:"CASH",value:l,onChange:r=>x(r.target.value),isRequired:!0,isInvalid:S,errorMessage:"Price not set"})})]}),e.jsx(P,{color:"primary",onClick:E,isLoading:C,className:"text-xl font-bold",children:"APPLY"})]})]})]}),e.jsx(d,{}),e.jsx(M,{children:e.jsx(P,{color:"danger",onPress:a,children:"Close"})})]})})})]})}export{me as default};
