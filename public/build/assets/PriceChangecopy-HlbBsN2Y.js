import{r as s,a as _,j as e}from"./app-BgclCP_U.js";import{d as $,$ as w,a as A}from"./chunk-RUXXUVWM-DVz6Pog_.js";import{I as F,_ as R}from"./index-BB6kETrK.js";import{r as k,a as H}from"./chunk-6TA6N6HF-BpE0VHQN.js";import{m as L,a as V,b as Y,c as z,d as M}from"./chunk-P2T5LMDM-reKcKOSN.js";import{c as d}from"./chunk-H4VOEXHF-TewfOLb0.js";import{c}from"./chunk-J333S7JQ-fhG3Ko0V.js";import{d as o}from"./chunk-44JHHBS2-C3-jQeuQ.js";import{c as n}from"./chunk-5ALFRFZW-DZJt4FN_.js";import{i as P}from"./chunk-GQQM5TNQ-CwUyVOv_.js";import{b}from"./chunk-DBLREEYE-CG8yp442.js";import"./chunk-N2KXC5ZE-OZCedwgk.js";import"./chunk-XHQUSKIE-C9evg4Jy.js";import"./useControlledState-DEEM-shP.js";import"./chunk-RQNQ5XFG-CmL0HLIT.js";import"./getScrollParent-ClU_Bz4K.js";import"./FocusScope-DU-SyPrP.js";import"./useFocusable-CtZfeggp.js";import"./useFormValidationState-Ct6XxOLM.js";import"./scrollIntoView-SfQOsQd-.js";import"./useFormReset-DYDVEd1s.js";import"./useLabels-Cb_neJ1j.js";import"./useCollator-BBcv62qp.js";import"./LiveAnnouncer-D-UZuySi.js";import"./index-D3TozaOH.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";import"./chunk-6NL67ZRH-DYxa27IY.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./index-X92CTFGl.js";import"./VisuallyHidden-DfowBU03.js";import"./chunk-CAFRINWI-BTDo8zfp.js";import"./useLabel-DpShN-Pb.js";import"./chunk-M3MASYO7-Bt50UMbM.js";function Ne({isOpen:i,onOpenChange:N}){const[m,G]=s.useState([]),[f,I]=s.useState(null),[v,p]=s.useState(""),[l,u]=s.useState(""),[C,x]=s.useState(!1),[S,h]=s.useState(!1);s.useEffect(()=>{i&&_.get("/get-grades").then(r=>{G(r.data)}).catch(r=>{console.error("Error fetching grades:",r)})},[i]);const D=r=>{var j,g;const a=r.target.value;console.log("Selected Grade ID:",a);const t=m.find(y=>y.Grade_ID===a);console.log("Selected Grade:",t),t&&(console.log("Grade Price Profile:",t.price_profile),console.log("Grade Price:",(j=t.price_profile)==null?void 0:j.Grade_Price),I(t),p(((g=t.price_profile)==null?void 0:g.Grade_Price)||"0"))},E=()=>{if(!f){console.error("No grade selected");return}if(!l){h(!0);return}x(!0),_.put(`/update-price/${f.Grade_ID}`,{newPrice:l}).then(r=>{R.success("Price updated successfully!"),console.log("Price updated successfully:",r.data),p(l),u("")}).catch(r=>{console.error("Error updating price:",r)}).finally(()=>{x(!1),h(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(F,{position:"top-center"}),e.jsx(L,{isDismissable:!1,isKeyboardDismissDisabled:!0,size:"4xl",isOpen:i,onOpenChange:N,hideCloseButton:!0,children:e.jsx(V,{children:r=>e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"flex flex-col gap-1",children:e.jsx("h1",{className:"text-2xl font-extrabold",children:"PRICE CHANGE"})}),e.jsxs(z,{className:"w-full mx-auto p-3",children:[e.jsx($,{variant:"faded",defaultValue:w(A()),label:e.jsx("p",{className:"text-lg font-extrabold",children:"EFFECTIVITY"}),labelPlacement:"outside-left",showMonthAndYearPickers:!0,isDisabled:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(d,{children:[e.jsx(c,{children:e.jsx("h2",{className:"text-xl font-extrabold",children:"Grades"})}),e.jsx(o,{}),e.jsx(n,{className:"p-4",children:e.jsx(k,{label:"Select Grades",onChange:D,children:m.map(a=>e.jsx(H,{className:"text-xl font-semibold",size:"lg",value:a.Grade_ID,children:a.Grade_Name.trim()},a.Grade_ID))})})]}),e.jsxs("div",{className:"grid grid-rows-2 gap-2",children:[e.jsxs(d,{children:[e.jsx(c,{children:e.jsx("h2",{className:"text-xl font-extrabold",children:"Current Price"})}),e.jsx(o,{}),e.jsx(n,{className:"gap-2 p-2",children:e.jsx(P,{variant:"faded",label:"CASH",value:v,isReadOnly:!0})})]}),e.jsxs(d,{children:[e.jsx(c,{children:e.jsx("h2",{className:"text-xl font-extrabold",children:"New Price"})}),e.jsx(o,{}),e.jsx(n,{className:"gap-2 p-2",children:e.jsx(P,{label:"CASH",value:l,onChange:a=>u(a.target.value),isRequired:!0,isInvalid:S,errorMessage:"Price not set"})})]}),e.jsx(b,{color:"primary",onClick:E,isLoading:C,className:"text-xl font-bold",children:"APPLY"})]})]})]}),e.jsx(o,{}),e.jsx(M,{children:e.jsx(b,{color:"danger",onPress:r,children:"Close"})})]})})})]})}export{Ne as default};
