import{r as u,j as e,a as c}from"./app-CU-WO1ha.js";import{P as O}from"./PumpDelivery-X4cQwOrO.js";import{CheckIcon as D}from"./Icon-BSx81m0u.js";import{G as I}from"./iconBase-ChouL2UD.js";import{getPumpStatusColor as S}from"./PumpStatus-5SYFXcQO.js";import{_ as r}from"./index-CRnhcW6K.js";import{c as C,a as T}from"./chunk-4WFLSIHH-z6G9cx4w.js";import{c as _}from"./chunk-H4VOEXHF-BWJCRE_t.js";import{c as b}from"./chunk-J333S7JQ-CxZvlNFF.js";import{c as v}from"./chunk-5ALFRFZW-BeY_uHae.js";import{i as a}from"./chunk-GQQM5TNQ-D0eR7hlP.js";import{c as R}from"./chunk-JHUBASYZ-D3WeJlyp.js";import{b as l}from"./chunk-DBLREEYE-CM8jspvc.js";import{m as F,a as U,b as L,c as k}from"./chunk-P2T5LMDM-BQTIUMsB.js";import{m as A}from"./chunk-QY5NICTW-C2ClPSnE.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";import"./chunk-N2KXC5ZE-B6GiQUqI.js";import"./chunk-YRZGWF2W-BfrLYRe5.js";import"./chunk-RQNQ5XFG-B4M0tKT3.js";import"./chunk-RJKRL3AU-CjtrMR1U.js";import"./chunk-XHQUSKIE-DXaFXxBl.js";import"./useFocusable-CwbNjnte.js";import"./FocusScope-5gH3nO3Z.js";import"./useToggleState-BRXcg629.js";import"./useFormReset-kB5BFIA6.js";import"./useControlledState-CYT4S43w.js";import"./index-BldL4JtZ.js";import"./index-BIQJOCN_.js";import"./useHover-0cX7ZD-_.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./useFormValidationState-hFBE8GQT.js";import"./VisuallyHidden-PwrLX68e.js";import"./chunk-IXXDDLGU-DPLgLgt2.js";import"./index-047NrGZK.js";import"./chunk-M3MASYO7-6BdpfVw9.js";import"./index-B0H9SEvE.js";import"./chunk-6NL67ZRH-BGQLi1Av.js";import"./useField-CKlBpT84.js";import"./useLabels-BY_Pl7HM.js";function w(s){return I({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 1 1-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 0 1-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0 1 22.62-22.62L256 233.37l52.69-52.68a16 16 0 0 1 22.62 22.62L278.63 256z"},child:[]}]})(s)}const Ie=({pump:s,handleAppendDeliveryData:f})=>{const g=s.Data.NozzleUp||s.Type==="PumpFillingStatus"||s.Type===!s.Data.NozzleUp,i={fontFamily:"'Roboto Mono', monospace",fontSize:"1rem",fontWeight:"bold"},[m,n]=u.useState(!1),[M,d]=u.useState([]),h=o=>{r.success(`Nozzle is up for Pump ${o}`)};u.useEffect(()=>{s.Data.NozzleUp&&h(s.Id)},[s.Data.NozzleUp]);const y=async o=>{try{const t=await c.post("/authorize-pump",o);return r.success("Pump authorized successfully"),console.log("Authorization successful:",t.data),!0}catch(t){return r.error("Error authorizing pump"),console.error("Error authorizing pump:",t),!1}},z=async o=>{const t={Pump:o.Id,Nozzle:o.Data.NozzleUp,Type:"FullTank",Dose:o.Data.Dose,Price:o.Data.Price};await y(t)&&d(N=>({...N,[o.Id]:!0}))},P=o=>{c.post("/stop-pump",{Pump:o}).then(t=>{r.success("Pump stopped successfully"),console.log("Pump stopped successfully:",t.data),d(p=>({...p,[o]:!1}))}).catch(t=>{r.error("Error stopping pump"),console.error("Error stopping pump:",t)})},x=o=>{c.post("/suspend",{Pump:o}).then(t=>{r.success("Pump suspended successfully"),console.log("Pump suspended successfully:",t.data)}).catch(t=>{r.error("Error suspending pump"),console.error("Error suspending pump:",t)})},j=o=>{c.post("/resume",{Pump:o}).then(t=>{r.success("Pump resumed successfully"),console.log("Pump resumed successfully:",t.data)}).catch(t=>{r.error("Error resuming pump"),console.error("Error resuming pump:",t)})},E=o=>{c.post("/emergency-stop",{Pump:o}).then(t=>{r.success("Emergency stop activated"),console.log("Emergency stop activated:",t.data)}).catch(t=>{r.error("Error performing emergency stop"),console.error("Error performing emergency stop:",t)})};return e.jsxs(e.Fragment,{children:[e.jsxs(_,{className:"p-2",children:[e.jsxs(b,{className:"flex items-center justify-between",children:[e.jsx(O,{pumpId:s.Id,onAppend:f,disabled:s.Type==="PumpOfflineStatus"}),e.jsx(C,{size:"lg",color:S(s.Type,s.Data.NozzleUp),avatar:e.jsx(T,{name:s.Data.Pump.toString(),getInitials:o=>o.charAt(0)}),children:s.Data.NozzleUp?"NOZZLE":s.Type==="PumpIdleStatus"?"IDLE":s.Type==="PumpFillingStatus"?"FILLING":s.Type==="PumpEndOfTransactionStatus"?"DONE":s.Type==="PumpOfflineStatus"?"OFFLINE":""})]}),e.jsx(v,{className:"flex gap-2",children:s.Data.NozzleUp?e.jsx(a,{color:"success",size:"lg",value:s.Data.FuelGradeName,isReadOnly:!0}):s.Type==="PumpIdleStatus"?e.jsx(e.Fragment,{children:e.jsx(a,{color:"success",size:"lg",value:"ONLINE",isReadOnly:!0,startContent:e.jsx(D,{})})}):s.Type==="PumpFillingStatus"?e.jsxs(e.Fragment,{children:[e.jsx(a,{size:"sm",label:"AMOUNT",value:`â‚± ${s.Data.Amount}`,isReadOnly:!0,style:i}),e.jsx(a,{size:"sm",label:"VOLUME",value:`L ${s.Data.Volume}`,isReadOnly:!0,style:i}),e.jsx(a,{size:"sm",label:"PRICE",value:s.Data.Price,isReadOnly:!0,style:i})]}):s.Type==="PumpEndOfTransactionStatus"?e.jsxs(e.Fragment,{children:[e.jsx(a,{size:"sm",label:"AMOUNT",value:s.Data.Amount,isReadOnly:!0,style:i}),e.jsx(a,{size:"sm",label:"VOLUME",value:s.Data.Volume,isReadOnly:!0,style:i}),e.jsx(a,{size:"sm",label:"PRICE",value:s.Data.Price,isReadOnly:!0,style:i})]}):s.Type==="PumpOfflineStatus"?e.jsx(a,{color:"danger",size:"lg",value:"OFFLINE",isReadOnly:!0,startContent:e.jsx(w,{className:"w-6 h-6"})}):null}),g&&e.jsxs(R,{className:"flex gap-2",children:[e.jsx(l,{size:"sm",color:"success",onClick:()=>z(s),children:"AUTHORIZE"}),e.jsx(l,{size:"sm",onClick:()=>n(!m),children:"CONTROLS"})]})]},s.Id),e.jsx(F,{placement:"center",classNames:{backdrop:"bg-gradient-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20"},isOpen:m,onClose:()=>n(!1),children:e.jsxs(U,{children:[e.jsxs(L,{children:["Pump (",s.Id,") Controls "]}),e.jsx(k,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4",children:[e.jsx(l,{size:"lg",color:"danger",onClick:()=>P(s.Id),children:"STOP"}),e.jsx(l,{size:"lg",color:"warning",onClick:()=>x(s.Id),children:"SUSPEND"}),e.jsx(l,{size:"lg",color:"primary",onClick:()=>j(s.Id),children:"RESUME"}),e.jsx(l,{size:"lg",className:"bg-red-500",onClick:()=>E(s.Id),children:"EMERGENCY STOP"})]})}),e.jsx(A,{children:e.jsx(l,{color:"danger",variant:"flat",onClick:()=>n(!1),children:"Close"})})]})})]})};export{Ie as PumpCard};
