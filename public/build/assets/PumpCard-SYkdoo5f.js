import{j as s,b as gs,u as hs,r as c,a as _}from"./app-CZL9chFl.js";import{G as vs,P as xs}from"./PumpDelivery-DEtEc0CT.js";import{CheckIcon as ys}from"./Icon-Yd2M5erF.js";import{getPumpStatusColor as Cs}from"./PumpStatus-5SYFXcQO.js";import{_ as x}from"./index-BQye7--Q.js";import{t as W,u as H,c as V,d as M,f as es,m as Ps,o as ws}from"./chunk-N2KXC5ZE-DfxA9TNT.js";import{r as js,d as zs,t as Z,a as as,b as K,c as Ns}from"./chunk-XHQUSKIE-CRTs_YlA.js";import{c as a}from"./chunk-2PIR7DFM-CbcDDgM_.js";import{C as Es,i as P}from"./chunk-GQQM5TNQ-Cnr-i4s3.js";import{$ as Is,f as Os}from"./useHover-Cn_Qs2ce.js";import{s as Ss}from"./useFormValidationState-p9Ei66cx.js";import{u as Ds}from"./index-DJhsGy01.js";import{m as _s}from"./chunk-QY5NICTW-4LiwpMYQ.js";import{m as Fs,a as ks,b as Bs,c as As}from"./chunk-P2T5LMDM-8YpWCchi.js";import{c as Ts,a as Rs,b as Ms}from"./chunk-H4VOEXHF-Di3Z_Bs5.js";import{c as Vs}from"./chunk-J333S7JQ-CwmjM8Ow.js";import{b as z}from"./chunk-DBLREEYE-CtPbsGHj.js";var ss=W({slots:{base:["relative","max-w-fit","min-w-min","inline-flex","items-center","justify-between","box-border","whitespace-nowrap"],content:"flex-1 text-inherit font-normal",dot:["w-2","h-2","ml-1","rounded-full"],avatar:"flex-shrink-0",closeButton:["z-10","appearance-none","outline-none","select-none","transition-opacity","opacity-70","hover:opacity-100","cursor-pointer","active:opacity-disabled","tap-highlight-transparent"]},variants:{variant:{solid:{},bordered:{base:"border-medium bg-transparent"},light:{base:"bg-transparent"},flat:{},faded:{base:"border-medium"},shadow:{},dot:{base:"border-medium border-default text-foreground bg-transparent"}},color:{default:{dot:"bg-default-400"},primary:{dot:"bg-primary"},secondary:{dot:"bg-secondary"},success:{dot:"bg-success"},warning:{dot:"bg-warning"},danger:{dot:"bg-danger"}},size:{sm:{base:"px-1 h-6 text-tiny",content:"px-1",closeButton:"text-medium",avatar:"w-4 h-4"},md:{base:"px-1 h-7 text-small",content:"px-2",closeButton:"text-large",avatar:"w-5 h-5"},lg:{base:"px-2 h-8 text-medium",content:"px-2",closeButton:"text-xl",avatar:"w-6 h-6"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isCloseButtonFocusVisible:{true:{closeButton:[...js,"ring-1","rounded-full"]}}},defaultVariants:{variant:"solid",color:"default",size:"md",radius:"full",isDisabled:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:a.solid.default}},{variant:"solid",color:"primary",class:{base:a.solid.primary}},{variant:"solid",color:"secondary",class:{base:a.solid.secondary}},{variant:"solid",color:"success",class:{base:a.solid.success}},{variant:"solid",color:"warning",class:{base:a.solid.warning}},{variant:"solid",color:"danger",class:{base:a.solid.danger}},{variant:"shadow",color:"default",class:{base:a.shadow.default}},{variant:"shadow",color:"primary",class:{base:a.shadow.primary}},{variant:"shadow",color:"secondary",class:{base:a.shadow.secondary}},{variant:"shadow",color:"success",class:{base:a.shadow.success}},{variant:"shadow",color:"warning",class:{base:a.shadow.warning}},{variant:"shadow",color:"danger",class:{base:a.shadow.danger}},{variant:"bordered",color:"default",class:{base:a.bordered.default}},{variant:"bordered",color:"primary",class:{base:a.bordered.primary}},{variant:"bordered",color:"secondary",class:{base:a.bordered.secondary}},{variant:"bordered",color:"success",class:{base:a.bordered.success}},{variant:"bordered",color:"warning",class:{base:a.bordered.warning}},{variant:"bordered",color:"danger",class:{base:a.bordered.danger}},{variant:"flat",color:"default",class:{base:a.flat.default}},{variant:"flat",color:"primary",class:{base:a.flat.primary}},{variant:"flat",color:"secondary",class:{base:a.flat.secondary}},{variant:"flat",color:"success",class:{base:a.flat.success}},{variant:"flat",color:"warning",class:{base:a.flat.warning}},{variant:"flat",color:"danger",class:{base:a.flat.danger}},{variant:"faded",color:"default",class:{base:a.faded.default}},{variant:"faded",color:"primary",class:{base:a.faded.primary}},{variant:"faded",color:"secondary",class:{base:a.faded.secondary}},{variant:"faded",color:"success",class:{base:a.faded.success}},{variant:"faded",color:"warning",class:{base:a.faded.warning}},{variant:"faded",color:"danger",class:{base:a.faded.danger}},{variant:"light",color:"default",class:{base:a.light.default}},{variant:"light",color:"primary",class:{base:a.light.primary}},{variant:"light",color:"secondary",class:{base:a.light.secondary}},{variant:"light",color:"success",class:{base:a.light.success}},{variant:"light",color:"warning",class:{base:a.light.warning}},{variant:"light",color:"danger",class:{base:a.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"sm",class:{base:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"md",class:{base:"w-6 h-6 min-w-6 min-h-6"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"lg",class:{base:"w-7 h-7 min-w-7 min-h-7"}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:"px-0 justify-center",content:"px-0 flex-none"}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:"w-auto"}},{isOneChar:!0,variant:"dot",class:{base:"w-auto h-7 px-1 items-center",content:"px-2"}},{hasStartContent:!0,size:"sm",class:{content:"pl-0.5"}},{hasStartContent:!0,size:["md","lg"],class:{content:"pl-1"}},{hasEndContent:!0,size:"sm",class:{content:"pr-0.5"}},{hasEndContent:!0,size:["md","lg"],class:{content:"pr-1"}}]}),Gs=W({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...zs],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...Z,"flex","items-center","justify-center"],name:[...Z,"font-normal","text-center","text-inherit"],icon:[...Z,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:a.solid.default},primary:{base:a.solid.primary},secondary:{base:a.solid.secondary},success:{base:a.solid.success},warning:{base:a.solid.warning},danger:{base:a.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});W({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var $s=()=>s.jsxs("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[s.jsx("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),s.jsx("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[pe,Ls]=gs({name:"AvatarGroupContext",strict:!1});function Us(e={}){var v,h,u,m,n,f,l;const d=hs(),t=Ls(),i=!!t,{as:p,ref:y,src:g,name:o,icon:r,classNames:b,fallback:N,alt:G=o||"avatar",imgRef:F,color:E=(v=t==null?void 0:t.color)!=null?v:"default",radius:I=(h=t==null?void 0:t.radius)!=null?h:"full",size:O=(u=t==null?void 0:t.size)!=null?u:"md",isBordered:w=(m=t==null?void 0:t.isBordered)!=null?m:!1,isDisabled:S=(n=t==null?void 0:t.isDisabled)!=null?n:!1,isFocusable:k=!1,getInitials:$=Ss,ignoreFallback:B=!1,showFallback:A=!1,ImgComponent:C="img",imgProps:Y,className:os,onError:ls,...q}=e,ns=p||"span",is=H(y),L=H(F),{isFocusVisible:cs,isFocused:ds,focusProps:J}=as(),{isHovered:us,hoverProps:ms}=Is({isDisabled:S}),T=(l=(f=e.disableAnimation)!=null?f:d==null?void 0:d.disableAnimation)!=null?l:!1,R=Ds({src:g,onError:ls,ignoreFallback:B})==="loaded",Q=typeof C=="string",fs=(!g||!R)&&A,D=c.useMemo(()=>{var j;return Gs({color:E,radius:I,size:O,isBordered:w,isDisabled:S,isInGroup:i,disableAnimation:T,isInGridGroup:(j=t==null?void 0:t.isGrid)!=null?j:!1})},[E,I,O,w,S,T,i,t==null?void 0:t.isGrid]),X=V(b==null?void 0:b.base,os),U=c.useMemo(()=>k||p==="button",[k,p]),bs=c.useCallback((j={})=>({ref:is,tabIndex:U?0:-1,"data-hover":M(us),"data-focus":M(ds),"data-focus-visible":M(cs),className:D.base({class:V(X,j==null?void 0:j.className)}),...K(q,ms,U?J:{})}),[U,D,X,J,q]),ps=c.useCallback((j={})=>({ref:L,src:g,"data-loaded":M(R),className:D.img({class:b==null?void 0:b.img}),...K(Y,j,Os({disableAnimation:T},{enabled:Q}))}),[D,R,Y,T,g,L,Q]);return{Component:ns,ImgComponent:C,src:g,alt:G,icon:r,name:o,imgRef:L,slots:D,classNames:b,fallback:N,isImgLoaded:R,showFallback:fs,ignoreFallback:B,getInitials:$,getAvatarProps:bs,getImageProps:ps}}var ts=es((e,v)=>{const{Component:h,ImgComponent:u,src:m,icon:n=s.jsx($s,{}),alt:f,classNames:l,slots:d,name:t,showFallback:i,fallback:p,getInitials:y,getAvatarProps:g,getImageProps:o}=Us({...e,ref:v}),r=c.useMemo(()=>!i&&m?null:p?s.jsx("div",{"aria-label":f,className:d.fallback({class:l==null?void 0:l.fallback}),role:"img",children:p}):t?s.jsx("span",{"aria-label":f,className:d.name({class:l==null?void 0:l.name}),role:"img",children:y(t)}):s.jsx("span",{"aria-label":f,className:d.icon({class:l==null?void 0:l.icon}),role:"img",children:n}),[i,m,p,t,l]);return s.jsxs(h,{...g(),children:[m&&s.jsx(u,{...o(),alt:f}),r]})});ts.displayName="NextUI.Avatar";var Zs=ts;function Hs(e){const[v,h]=Ps(e,ss.variantKeys),{ref:u,as:m,children:n,avatar:f,startContent:l,endContent:d,onClose:t,classNames:i,className:p,...y}=v,g=m||"div",o=H(u),r=V(i==null?void 0:i.base,p),b=!!t,N=e.variant==="dot",{focusProps:G,isFocusVisible:F}=as(),E=c.useMemo(()=>typeof n=="string"&&(n==null?void 0:n.length)===1,[n]),I=c.useMemo(()=>!!f||!!l,[f,l]),O=c.useMemo(()=>!!d||b,[d,b]),w=c.useMemo(()=>ss({...h,hasStartContent:I,hasEndContent:O,isOneChar:E,isCloseable:b,isCloseButtonFocusVisible:F}),[ws(h),F,I,O,E,b]),{pressProps:S}=Ns({isDisabled:!!(e!=null&&e.isDisabled),onPress:t}),k=()=>({ref:o,className:w.base({class:r}),...y}),$=()=>({role:"button",tabIndex:0,className:w.closeButton({class:i==null?void 0:i.closeButton}),"aria-label":"close chip",...K(S,G)}),B=C=>c.isValidElement(C)?c.cloneElement(C,{className:w.avatar({class:i==null?void 0:i.avatar})}):null,A=C=>c.isValidElement(C)?c.cloneElement(C,{className:V("max-h-[80%]",C.props.className)}):null;return{Component:g,children:n,slots:w,classNames:i,isDot:N,isCloseable:b,startContent:B(f)||A(l),endContent:A(d),getCloseButtonProps:$,getChipProps:k}}var rs=es((e,v)=>{const{Component:h,children:u,slots:m,classNames:n,isDot:f,isCloseable:l,startContent:d,endContent:t,getCloseButtonProps:i,getChipProps:p}=Hs({...e,ref:v}),y=c.useMemo(()=>f&&!d?s.jsx("span",{className:m.dot({class:n==null?void 0:n.dot})}):d,[m,d,f]),g=c.useMemo(()=>l?s.jsx("span",{...i(),children:t||s.jsx(Es,{})}):t,[t,l,i]);return s.jsxs(h,{...p(),children:[y,s.jsx("span",{className:m.content({class:n==null?void 0:n.content}),children:u}),g]})});rs.displayName="NextUI.Chip";var Ks=rs;function Ws(e){return vs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 1 1-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 0 1-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0 1 22.62-22.62L256 233.37l52.69-52.68a16 16 0 0 1 22.62 22.62L278.63 256z"},child:[]}]})(e)}const Ys=({pump:e,handleAppendDeliveryData:v})=>{const h=e.Data.NozzleUp||e.Type==="PumpFillingStatus"||e.Type===!e.Data.NozzleUp,u={fontFamily:"'Roboto Mono', monospace",fontSize:"1rem",fontWeight:"bold"},[m,n]=c.useState(!1),[f,l]=c.useState([]),d=async o=>{try{const r=await _.post("/authorize-pump",o);return x.success("Pump authorized successfully"),console.log("Authorization successful:",r.data),!0}catch(r){return x.error("Error authorizing pump"),console.error("Error authorizing pump:",r),!1}},t=async o=>{const r={Pump:o.Id,Nozzle:o.Data.NozzleUp,Type:"FullTank",Dose:o.Data.Dose,Price:o.Data.Price};await d(r)&&l(N=>({...N,[o.Id]:!0}))},i=o=>{_.post("/stop-pump",{Pump:o}).then(r=>{x.success("Pump stopped successfully"),console.log("Pump stopped successfully:",r.data),l(b=>({...b,[o]:!1}))}).catch(r=>{x.error("Error stopping pump"),console.error("Error stopping pump:",r)})},p=o=>{_.post("/suspend",{Pump:o}).then(r=>{x.success("Pump suspended successfully"),console.log("Pump suspended successfully:",r.data)}).catch(r=>{x.error("Error suspending pump"),console.error("Error suspending pump:",r)})},y=o=>{_.post("/resume",{Pump:o}).then(r=>{x.success("Pump resumed successfully"),console.log("Pump resumed successfully:",r.data)}).catch(r=>{x.error("Error resuming pump"),console.error("Error resuming pump:",r)})},g=o=>{_.post("/emergency-stop",{Pump:o}).then(r=>{x.success("Emergency stop activated"),console.log("Emergency stop activated:",r.data)}).catch(r=>{x.error("Error performing emergency stop"),console.error("Error performing emergency stop:",r)})};return s.jsxs(s.Fragment,{children:[s.jsxs(Ts,{className:"p-2",children:[s.jsxs(Vs,{className:"flex items-center justify-between",children:[s.jsx(xs,{pumpId:e.Id,onAppend:v,disabled:e.Type==="PumpOfflineStatus"}),s.jsx(Ks,{size:"lg",color:Cs(e.Type,e.Data.NozzleUp),avatar:s.jsx(Zs,{name:e.Data.Pump.toString(),getInitials:o=>o.charAt(0)}),children:e.Data.NozzleUp?"NOZZLE":e.Type==="PumpIdleStatus"?"IDLE":e.Type==="PumpFillingStatus"?"FILLING":e.Type==="PumpEndOfTransactionStatus"?"DONE":e.Type==="PumpOfflineStatus"?"OFFLINE":""})]}),s.jsx(Rs,{className:"flex gap-2",children:e.Data.NozzleUp?s.jsx(P,{color:"success",size:"lg",value:e.Data.FuelGradeName,isReadOnly:!0}):e.Type==="PumpIdleStatus"?s.jsx(s.Fragment,{children:s.jsx(P,{color:"success",size:"lg",value:"ONLINE",isReadOnly:!0,startContent:s.jsx(ys,{})})}):e.Type==="PumpFillingStatus"?s.jsxs(s.Fragment,{children:[s.jsx(P,{size:"sm",label:"AMOUNT",value:`â‚± ${e.Data.Amount}`,isReadOnly:!0,style:u}),s.jsx(P,{size:"sm",label:"VOLUME",value:`L ${e.Data.Volume}`,isReadOnly:!0,style:u}),s.jsx(P,{size:"sm",label:"PRICE",value:e.Data.Price,isReadOnly:!0,style:u})]}):e.Type==="PumpEndOfTransactionStatus"?s.jsxs(s.Fragment,{children:[s.jsx(P,{size:"sm",label:"AMOUNT",value:e.Data.Amount,isReadOnly:!0,style:u}),s.jsx(P,{size:"sm",label:"VOLUME",value:e.Data.Volume,isReadOnly:!0,style:u}),s.jsx(P,{size:"sm",label:"PRICE",value:e.Data.Price,isReadOnly:!0,style:u})]}):e.Type==="PumpOfflineStatus"?s.jsx(P,{color:"danger",size:"lg",value:"OFFLINE",isReadOnly:!0,startContent:s.jsx(Ws,{className:"w-6 h-6"})}):null}),h&&s.jsxs(Ms,{className:"flex gap-2",children:[s.jsx(z,{size:"sm",color:"success",onClick:()=>t(e),children:"AUTHORIZE"}),s.jsx(z,{size:"sm",onClick:()=>n(!m),children:"CONTROLS"})]})]},e.Id),s.jsx(Fs,{placement:"center",classNames:{backdrop:"bg-gradient-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20"},isOpen:m,onClose:()=>n(!1),children:s.jsxs(ks,{children:[s.jsxs(Bs,{children:["Pump (",e.Id,") Controls "]}),s.jsx(As,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4",children:[s.jsx(z,{size:"lg",color:"danger",onClick:()=>i(e.Id),children:"STOP"}),s.jsx(z,{size:"lg",color:"warning",onClick:()=>p(e.Id),children:"SUSPEND"}),s.jsx(z,{size:"lg",color:"primary",onClick:()=>y(e.Id),children:"RESUME"}),s.jsx(z,{size:"lg",className:"bg-red-500",onClick:()=>g(e.Id),children:"EMERGENCY STOP"})]})}),s.jsx(_s,{children:s.jsx(z,{color:"danger",variant:"flat",onClick:()=>n(!1),children:"Close"})})]})})]})},qs=Ys,ge=Object.freeze(Object.defineProperty({__proto__:null,default:qs},Symbol.toStringTag,{value:"Module"}));export{qs as P,Zs as a,ge as b};
