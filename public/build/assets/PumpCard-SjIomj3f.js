import{j as s,c as hs,u as vs,r as f,a as F}from"./app-B4BG-zsf.js";import{G as xs,P as ys}from"./PumpDelivery-DIyMvjHg.js";import{CheckIcon as Cs}from"./Icon-DJHGUTBe.js";import{getPumpStatusColor as ws}from"./PumpStatus-5SYFXcQO.js";import{_ as x}from"./index-CTtetcYR.js";import{t as W,u as G,c as k,d as V,f as Y,m as Ps,o as js}from"./chunk-N2KXC5ZE-BW_RAGKI.js";import{r as zs,d as Ns,t as H,a as as,b as K,c as Es}from"./chunk-XHQUSKIE-DypDiBrP.js";import{c as a}from"./chunk-2PIR7DFM-CbcDDgM_.js";import{C as Is,c as Os,i as w,a as Ds}from"./chunk-GQQM5TNQ-MgHbtYIT.js";import{$ as Ss,f as Fs}from"./useHover-BpzbR3dc.js";import{a as ks}from"./chunk-IXXDDLGU-YwwyhbHd.js";import{u as _s}from"./index-BCtTUkCw.js";import{u as Bs,m as As,a as Ms,b as Rs,c as Ts}from"./chunk-P2T5LMDM-D_p1vvn2.js";import{c as Vs,a as Gs}from"./chunk-H4VOEXHF-KXDKSMRY.js";import{b as z}from"./chunk-DBLREEYE-BMCo4_kI.js";import"./chunk-YRZGWF2W-Ipl9dw3b.js";import"./index-D74cUTvv.js";import"./index-pdR8Wy-p.js";import"./useControlledState-8q6f39f1.js";import"./useLabels-QLp2ZEbS.js";import"./index-Bz6CY5HX.js";import"./chunk-6NL67ZRH-C8eIUKNI.js";var es=W({slots:{base:["relative","max-w-fit","min-w-min","inline-flex","items-center","justify-between","box-border","whitespace-nowrap"],content:"flex-1 text-inherit font-normal",dot:["w-2","h-2","ml-1","rounded-full"],avatar:"flex-shrink-0",closeButton:["z-10","appearance-none","outline-none","select-none","transition-opacity","opacity-70","hover:opacity-100","cursor-pointer","active:opacity-disabled","tap-highlight-transparent"]},variants:{variant:{solid:{},bordered:{base:"border-medium bg-transparent"},light:{base:"bg-transparent"},flat:{},faded:{base:"border-medium"},shadow:{},dot:{base:"border-medium border-default text-foreground bg-transparent"}},color:{default:{dot:"bg-default-400"},primary:{dot:"bg-primary"},secondary:{dot:"bg-secondary"},success:{dot:"bg-success"},warning:{dot:"bg-warning"},danger:{dot:"bg-danger"}},size:{sm:{base:"px-1 h-6 text-tiny",content:"px-1",closeButton:"text-medium",avatar:"w-4 h-4"},md:{base:"px-1 h-7 text-small",content:"px-2",closeButton:"text-large",avatar:"w-5 h-5"},lg:{base:"px-2 h-8 text-medium",content:"px-2",closeButton:"text-xl",avatar:"w-6 h-6"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isCloseButtonFocusVisible:{true:{closeButton:[...zs,"ring-1","rounded-full"]}}},defaultVariants:{variant:"solid",color:"default",size:"md",radius:"full",isDisabled:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:a.solid.default}},{variant:"solid",color:"primary",class:{base:a.solid.primary}},{variant:"solid",color:"secondary",class:{base:a.solid.secondary}},{variant:"solid",color:"success",class:{base:a.solid.success}},{variant:"solid",color:"warning",class:{base:a.solid.warning}},{variant:"solid",color:"danger",class:{base:a.solid.danger}},{variant:"shadow",color:"default",class:{base:a.shadow.default}},{variant:"shadow",color:"primary",class:{base:a.shadow.primary}},{variant:"shadow",color:"secondary",class:{base:a.shadow.secondary}},{variant:"shadow",color:"success",class:{base:a.shadow.success}},{variant:"shadow",color:"warning",class:{base:a.shadow.warning}},{variant:"shadow",color:"danger",class:{base:a.shadow.danger}},{variant:"bordered",color:"default",class:{base:a.bordered.default}},{variant:"bordered",color:"primary",class:{base:a.bordered.primary}},{variant:"bordered",color:"secondary",class:{base:a.bordered.secondary}},{variant:"bordered",color:"success",class:{base:a.bordered.success}},{variant:"bordered",color:"warning",class:{base:a.bordered.warning}},{variant:"bordered",color:"danger",class:{base:a.bordered.danger}},{variant:"flat",color:"default",class:{base:a.flat.default}},{variant:"flat",color:"primary",class:{base:a.flat.primary}},{variant:"flat",color:"secondary",class:{base:a.flat.secondary}},{variant:"flat",color:"success",class:{base:a.flat.success}},{variant:"flat",color:"warning",class:{base:a.flat.warning}},{variant:"flat",color:"danger",class:{base:a.flat.danger}},{variant:"faded",color:"default",class:{base:a.faded.default}},{variant:"faded",color:"primary",class:{base:a.faded.primary}},{variant:"faded",color:"secondary",class:{base:a.faded.secondary}},{variant:"faded",color:"success",class:{base:a.faded.success}},{variant:"faded",color:"warning",class:{base:a.faded.warning}},{variant:"faded",color:"danger",class:{base:a.faded.danger}},{variant:"light",color:"default",class:{base:a.light.default}},{variant:"light",color:"primary",class:{base:a.light.primary}},{variant:"light",color:"secondary",class:{base:a.light.secondary}},{variant:"light",color:"success",class:{base:a.light.success}},{variant:"light",color:"warning",class:{base:a.light.warning}},{variant:"light",color:"danger",class:{base:a.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"sm",class:{base:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"md",class:{base:"w-6 h-6 min-w-6 min-h-6"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"lg",class:{base:"w-7 h-7 min-w-7 min-h-7"}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:"px-0 justify-center",content:"px-0 flex-none"}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:"w-auto"}},{isOneChar:!0,variant:"dot",class:{base:"w-auto h-7 px-1 items-center",content:"px-2"}},{hasStartContent:!0,size:"sm",class:{content:"pl-0.5"}},{hasStartContent:!0,size:["md","lg"],class:{content:"pl-1"}},{hasEndContent:!0,size:"sm",class:{content:"pr-0.5"}},{hasEndContent:!0,size:["md","lg"],class:{content:"pr-1"}}]}),Us=W({slots:{base:["flex","relative","justify-center","items-center","box-border","overflow-hidden","align-middle","text-white","z-0",...Ns],img:["flex","object-cover","w-full","h-full","transition-opacity","!duration-500","opacity-0","data-[loaded=true]:opacity-100"],fallback:[...H,"flex","items-center","justify-center"],name:[...H,"font-normal","text-center","text-inherit"],icon:[...H,"flex","items-center","justify-center","text-inherit","w-full","h-full"]},variants:{size:{sm:{base:"w-8 h-8 text-tiny"},md:{base:"w-10 h-10 text-tiny"},lg:{base:"w-14 h-14 text-small"}},color:{default:{base:a.solid.default},primary:{base:a.solid.primary},secondary:{base:a.solid.secondary},success:{base:a.solid.success},warning:{base:a.solid.warning},danger:{base:a.solid.danger}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isBordered:{true:{base:"ring-2 ring-offset-2 ring-offset-background dark:ring-offset-background-dark"}},isDisabled:{true:{base:"opacity-disabled"}},isInGroup:{true:{base:["-ms-2 data-[hover=true]:-translate-x-3 rtl:data-[hover=true]:translate-x-3 transition-transform","data-[focus-visible=true]:-translate-x-3 rtl:data-[focus-visible=true]:translate-x-3"]}},isInGridGroup:{true:{base:"m-0 data-[hover=true]:translate-x-0"}},disableAnimation:{true:{base:"transition-none",img:"transition-none"},false:{}}},defaultVariants:{size:"md",color:"default",radius:"full"},compoundVariants:[{color:"default",isBordered:!0,class:{base:"ring-default"}},{color:"primary",isBordered:!0,class:{base:"ring-primary"}},{color:"secondary",isBordered:!0,class:{base:"ring-secondary"}},{color:"success",isBordered:!0,class:{base:"ring-success"}},{color:"warning",isBordered:!0,class:{base:"ring-warning"}},{color:"danger",isBordered:!0,class:{base:"ring-danger"}}]});W({slots:{base:"flex items-center justify-center h-auto w-max",count:"hover:-translate-x-0"},variants:{isGrid:{true:"inline-grid grid-cols-4 gap-3"}}});var $s=()=>s.jsxs("svg",{"aria-hidden":"true",fill:"none",height:"80%",role:"presentation",viewBox:"0 0 24 24",width:"80%",children:[s.jsx("path",{d:"M12 2C9.38 2 7.25 4.13 7.25 6.75C7.25 9.32 9.26 11.4 11.88 11.49C11.96 11.48 12.04 11.48 12.1 11.49C12.12 11.49 12.13 11.49 12.15 11.49C12.16 11.49 12.16 11.49 12.17 11.49C14.73 11.4 16.74 9.32 16.75 6.75C16.75 4.13 14.62 2 12 2Z",fill:"currentColor"}),s.jsx("path",{d:"M17.0809 14.1489C14.2909 12.2889 9.74094 12.2889 6.93094 14.1489C5.66094 14.9989 4.96094 16.1489 4.96094 17.3789C4.96094 18.6089 5.66094 19.7489 6.92094 20.5889C8.32094 21.5289 10.1609 21.9989 12.0009 21.9989C13.8409 21.9989 15.6809 21.5289 17.0809 20.5889C18.3409 19.7389 19.0409 18.5989 19.0409 17.3589C19.0309 16.1289 18.3409 14.9889 17.0809 14.1489Z",fill:"currentColor"})]}),[Ce,Ls]=hs({name:"AvatarGroupContext",strict:!1});function Zs(e={}){var v,b,d,u,n,m,l;const i=vs(),t=Ls(),c=!!t,{as:g,ref:y,src:h,name:o,icon:r,classNames:p,fallback:N,alt:U=o||"avatar",imgRef:_,color:E=(v=t==null?void 0:t.color)!=null?v:"default",radius:I=(b=t==null?void 0:t.radius)!=null?b:"full",size:O=(d=t==null?void 0:t.size)!=null?d:"md",isBordered:P=(u=t==null?void 0:t.isBordered)!=null?u:!1,isDisabled:D=(n=t==null?void 0:t.isDisabled)!=null?n:!1,isFocusable:B=!1,getInitials:$=ks,ignoreFallback:A=!1,showFallback:M=!1,ImgComponent:C="img",imgProps:q,className:ls,onError:ns,...J}=e,is=g||"span",cs=G(y),L=G(_),{isFocusVisible:ds,isFocused:us,focusProps:Q}=as(),{isHovered:ms,hoverProps:fs}=Ss({isDisabled:D}),R=(l=(m=e.disableAnimation)!=null?m:i==null?void 0:i.disableAnimation)!=null?l:!1,T=_s({src:h,onError:ns,ignoreFallback:A})==="loaded",X=typeof C=="string",ps=(!h||!T)&&M,S=f.useMemo(()=>{var j;return Us({color:E,radius:I,size:O,isBordered:P,isDisabled:D,isInGroup:c,disableAnimation:R,isInGridGroup:(j=t==null?void 0:t.isGrid)!=null?j:!1})},[E,I,O,P,D,R,c,t==null?void 0:t.isGrid]),ss=k(p==null?void 0:p.base,ls),Z=f.useMemo(()=>B||g==="button",[B,g]),bs=f.useCallback((j={})=>({ref:cs,tabIndex:Z?0:-1,"data-hover":V(ms),"data-focus":V(us),"data-focus-visible":V(ds),className:S.base({class:k(ss,j==null?void 0:j.className)}),...K(J,fs,Z?Q:{})}),[Z,S,ss,Q,J]),gs=f.useCallback((j={})=>({ref:L,src:h,"data-loaded":V(T),className:S.img({class:p==null?void 0:p.img}),...K(q,j,Fs({disableAnimation:R},{enabled:X}))}),[S,T,q,R,h,L,X]);return{Component:is,ImgComponent:C,src:h,alt:U,icon:r,name:o,imgRef:L,slots:S,classNames:p,fallback:N,isImgLoaded:T,showFallback:ps,ignoreFallback:A,getInitials:$,getAvatarProps:bs,getImageProps:gs}}var ts=Y((e,v)=>{const{Component:b,ImgComponent:d,src:u,icon:n=s.jsx($s,{}),alt:m,classNames:l,slots:i,name:t,showFallback:c,fallback:g,getInitials:y,getAvatarProps:h,getImageProps:o}=Zs({...e,ref:v}),r=f.useMemo(()=>!c&&u?null:g?s.jsx("div",{"aria-label":m,className:i.fallback({class:l==null?void 0:l.fallback}),role:"img",children:g}):t?s.jsx("span",{"aria-label":m,className:i.name({class:l==null?void 0:l.name}),role:"img",children:y(t)}):s.jsx("span",{"aria-label":m,className:i.icon({class:l==null?void 0:l.icon}),role:"img",children:n}),[c,u,g,t,l]);return s.jsxs(b,{...h(),children:[u&&s.jsx(d,{...o(),alt:m}),r]})});ts.displayName="NextUI.Avatar";var Hs=ts;function Ks(e){const[v,b]=Ps(e,es.variantKeys),{ref:d,as:u,children:n,avatar:m,startContent:l,endContent:i,onClose:t,classNames:c,className:g,...y}=v,h=u||"div",o=G(d),r=k(c==null?void 0:c.base,g),p=!!t,N=e.variant==="dot",{focusProps:U,isFocusVisible:_}=as(),E=f.useMemo(()=>typeof n=="string"&&(n==null?void 0:n.length)===1,[n]),I=f.useMemo(()=>!!m||!!l,[m,l]),O=f.useMemo(()=>!!i||p,[i,p]),P=f.useMemo(()=>es({...b,hasStartContent:I,hasEndContent:O,isOneChar:E,isCloseable:p,isCloseButtonFocusVisible:_}),[js(b),_,I,O,E,p]),{pressProps:D}=Es({isDisabled:!!(e!=null&&e.isDisabled),onPress:t}),B=()=>({ref:o,className:P.base({class:r}),...y}),$=()=>({role:"button",tabIndex:0,className:P.closeButton({class:c==null?void 0:c.closeButton}),"aria-label":"close chip",...K(D,U)}),A=C=>f.isValidElement(C)?f.cloneElement(C,{className:P.avatar({class:c==null?void 0:c.avatar})}):null,M=C=>f.isValidElement(C)?f.cloneElement(C,{className:k("max-h-[80%]",C.props.className)}):null;return{Component:h,children:n,slots:P,classNames:c,isDot:N,isCloseable:p,startContent:A(m)||M(l),endContent:M(i),getCloseButtonProps:$,getChipProps:B}}var rs=Y((e,v)=>{const{Component:b,children:d,slots:u,classNames:n,isDot:m,isCloseable:l,startContent:i,endContent:t,getCloseButtonProps:c,getChipProps:g}=Ks({...e,ref:v}),y=f.useMemo(()=>m&&!i?s.jsx("span",{className:u.dot({class:n==null?void 0:n.dot})}):i,[u,i,m]),h=f.useMemo(()=>l?s.jsx("span",{...c(),children:t||s.jsx(Is,{})}):t,[t,l,c]);return s.jsxs(b,{...g(),children:[y,s.jsx("span",{className:u.content({class:n==null?void 0:n.content}),children:d}),h]})});rs.displayName="NextUI.Chip";var Ws=rs,os=Y((e,v)=>{const{as:b,children:d,className:u,...n}=e,{slots:m,classNames:l}=Bs(),i=G(v),t=b||"footer";return s.jsx(t,{ref:i,className:m.footer({class:k(l==null?void 0:l.footer,u)}),...n,children:d})});os.displayName="NextUI.ModalFooter";var Ys=os;function qs(e){return xs({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 1 1-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 0 1-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0 1 22.62-22.62L256 233.37l52.69-52.68a16 16 0 0 1 22.62 22.62L278.63 256z"},child:[]}]})(e)}const Js=({pump:e,handleAppendDeliveryData:v})=>{const b=e.Data.NozzleUp||e.Type==="PumpFillingStatus"||e.Type===!e.Data.NozzleUp,d={fontFamily:"'Roboto Mono', monospace",fontSize:"1rem",fontWeight:"bold"},[u,n]=f.useState(!1),[m,l]=f.useState([]),i=async o=>{try{const r=await F.post("/authorize-pump",o);return x.success("Pump authorized successfully"),console.log("Authorization successful:",r.data),!0}catch(r){return x.error("Error authorizing pump"),console.error("Error authorizing pump:",r),!1}},t=async o=>{const r={Pump:o.Id,Nozzle:o.Data.NozzleUp,Type:"FullTank",Dose:o.Data.Dose,Price:o.Data.Price};await i(r)&&l(N=>({...N,[o.Id]:!0}))},c=o=>{F.post("/stop-pump",{Pump:o}).then(r=>{x.success("Pump stopped successfully"),console.log("Pump stopped successfully:",r.data),l(p=>({...p,[o]:!1}))}).catch(r=>{x.error("Error stopping pump"),console.error("Error stopping pump:",r)})},g=o=>{F.post("/suspend",{Pump:o}).then(r=>{x.success("Pump suspended successfully"),console.log("Pump suspended successfully:",r.data)}).catch(r=>{x.error("Error suspending pump"),console.error("Error suspending pump:",r)})},y=o=>{F.post("/resume",{Pump:o}).then(r=>{x.success("Pump resumed successfully"),console.log("Pump resumed successfully:",r.data)}).catch(r=>{x.error("Error resuming pump"),console.error("Error resuming pump:",r)})},h=o=>{F.post("/emergency-stop",{Pump:o}).then(r=>{x.success("Emergency stop activated"),console.log("Emergency stop activated:",r.data)}).catch(r=>{x.error("Error performing emergency stop"),console.error("Error performing emergency stop:",r)})};return s.jsxs(s.Fragment,{children:[s.jsxs(Vs,{className:"p-2",children:[s.jsxs(Os,{className:"flex items-center justify-between",children:[s.jsx(ys,{pumpId:e.Id,onAppend:v,disabled:e.Type==="PumpOfflineStatus"}),s.jsx(Ws,{size:"lg",color:ws(e.Type,e.Data.NozzleUp),avatar:s.jsx(Hs,{name:e.Data.Pump.toString(),getInitials:o=>o.charAt(0)}),children:e.Data.NozzleUp?"NOZZLE":e.Type==="PumpIdleStatus"?"IDLE":e.Type==="PumpFillingStatus"?"FILLING":e.Type==="PumpEndOfTransactionStatus"?"DONE":e.Type==="PumpOfflineStatus"?"OFFLINE":""})]}),s.jsx(Gs,{className:"flex gap-2",children:e.Data.NozzleUp?s.jsx(w,{color:"success",size:"lg",value:e.Data.FuelGradeName,isReadOnly:!0}):e.Type==="PumpIdleStatus"?s.jsx(s.Fragment,{children:s.jsx(w,{color:"success",size:"lg",value:"ONLINE",isReadOnly:!0,startContent:s.jsx(Cs,{})})}):e.Type==="PumpFillingStatus"?s.jsxs(s.Fragment,{children:[s.jsx(w,{size:"sm",label:"AMOUNT",value:`â‚± ${e.Data.Amount}`,isReadOnly:!0,style:d}),s.jsx(w,{size:"sm",label:"VOLUME",value:`L ${e.Data.Volume}`,isReadOnly:!0,style:d}),s.jsx(w,{size:"sm",label:"PRICE",value:e.Data.Price,isReadOnly:!0,style:d})]}):e.Type==="PumpEndOfTransactionStatus"?s.jsxs(s.Fragment,{children:[s.jsx(w,{size:"sm",label:"AMOUNT",value:e.Data.Amount,isReadOnly:!0,style:d}),s.jsx(w,{size:"sm",label:"VOLUME",value:e.Data.Volume,isReadOnly:!0,style:d}),s.jsx(w,{size:"sm",label:"PRICE",value:e.Data.Price,isReadOnly:!0,style:d})]}):e.Type==="PumpOfflineStatus"?s.jsx(w,{color:"danger",size:"lg",value:"OFFLINE",isReadOnly:!0,startContent:s.jsx(qs,{className:"w-6 h-6"})}):null}),b&&s.jsxs(Ds,{className:"flex gap-2",children:[s.jsx(z,{size:"sm",color:"success",onClick:()=>t(e),children:"AUTHORIZE"}),s.jsx(z,{size:"sm",onClick:()=>n(!u),children:s.jsx("span",{className:"flex items-center gap-2",children:"Pump Controls"})})]})]},e.Id),s.jsx(As,{placement:"left",classNames:{backdrop:"bg-gradient-to-t from-zinc-900 to-zinc-900/10 backdrop-opacity-20"},isOpen:u,onClose:()=>n(!1),children:s.jsxs(Ms,{children:[s.jsxs(Rs,{children:["Pump (",e.Id,") Controls "]}),s.jsx(Ts,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4",children:[s.jsx(z,{size:"lg",color:"danger",onClick:()=>c(e.Id),children:"STOP"}),s.jsx(z,{size:"lg",color:"warning",onClick:()=>g(e.Id),children:"SUSPEND"}),s.jsx(z,{size:"lg",color:"primary",onClick:()=>y(e.Id),children:"RESUME"}),s.jsx(z,{size:"lg",className:"bg-red-500",onClick:()=>h(e.Id),children:"EMERGENCY STOP"})]})}),s.jsx(Ys,{children:s.jsx(z,{color:"danger",variant:"flat",onClick:()=>n(!1),children:"Close"})})]})})]})},we=Js;export{we as default};
