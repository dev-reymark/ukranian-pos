import{r as s,j as e,c as S,P as v}from"./app-DQR8ouMN.js";import{t as T,a as k}from"./chunk-FXLYF44B-Cdmm-oWP.js";import"./useLabels-CSRCNtbm.js";import"./useHasTabbableChild-BQh_kJOy.js";import"./FocusScope-DMt3cHMA.js";import"./index-X92CTFGl.js";import"./SelectionManager-yDbbLw-S.js";import"./scrollIntoView-B1mZhU84.js";import"./useControlledState-DsOKAyM-.js";import"./index-4G2CWJVf.js";import"./chunk-2PIR7DFM-CbcDDgM_.js";import"./useListState-DtcGX6Bb.js";const E=({subtotal:l,totalDiscount:d,transactionSummary:i})=>e.jsx("div",{className:"mt-4",children:e.jsx("table",{className:"min-w-full divide-y divide-gray-200",children:e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-2 align-middle text-left font-bold",children:"SUBTOTAL"}),e.jsxs("td",{colSpan:"5",className:"px-6 py-2 align-middle text-right font-bold",children:["₱",l]})]}),d>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-2 align-middle text-left font-bold",children:"TOTAL DISCOUNT"}),e.jsxs("td",{colSpan:"5",className:"px-6 py-2 align-middle text-right font-bold",children:["₱",d.toFixed(2)]})]}),i.mopPayments.map((a,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-2 align-middle text-left font-bold",children:a.mopName}),e.jsxs("td",{colSpan:"5",className:"px-6 py-2 align-middle text-right font-bold",children:["₱",a.amount.toFixed(2)]})]},c)),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-2 align-middle text-left font-bold",children:"Change"}),e.jsxs("td",{colSpan:"5",className:"px-6 py-2 align-middle text-right font-bold",children:["₱",i.change.toFixed(2)]})]})]})})}),B=({deliveryData:l,setSelectedRow:d,subtotal:i,transactionSaved:a,transactionSummary:c})=>{const[m,o]=s.useState(!1),[h,j]=s.useState(null);s.useEffect(()=>{a&&o(!0)},[a]),s.useEffect(()=>{o(!1)},[l]);const r=s.useMemo(()=>Object.values(l).flat(),[l]),f=t=>{d(t.Delivery_ID),j(t.Delivery_ID)},N=s.useMemo(()=>r.reduce((t,{DiscountedAmount:x})=>{const n=parseFloat(x)||0;return t+n},0),[r]);return e.jsx(T,{"aria-label":"Sale Window",children:e.jsx(k,{title:"WINDOW 1",children:e.jsx(S,{className:"p-2",children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-warning-100 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-extrabold uppercase tracking-wider",children:"ITEM(S)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-extrabold uppercase tracking-wider",children:"PRICE"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-extrabold uppercase tracking-wider",children:"VOLUME (L)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-extrabold uppercase tracking-wider",children:"AMOUNT (₱)"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.length===0?e.jsx("tr",{className:"h-[150px]",children:e.jsx("td",{colSpan:"6",className:"px-6 py-3 text-center text-xl font-extrabold text-gray-400",children:"Nothing to show"})}):r.map(({Delivery_ID:t,Pump:x,FuelGradeName:n,Price:g,Volume:w,OriginalAmount:y,Amount:u,PresetName:b,DiscountedAmount:p})=>e.jsxs(v.Fragment,{children:[e.jsxs("tr",{onClick:()=>f({Delivery_ID:t}),className:`cursor-pointer ${h===t?"bg-blue-100":"hover:bg-gray-100"}`,children:[e.jsxs("td",{className:"uppercase px-4 py-2 whitespace-nowrap",children:[x," -"," ",n]}),e.jsx("td",{className:"px-12 py-2 whitespace-nowrap",children:g}),e.jsx("td",{className:"px-12 py-2 whitespace-nowrap",children:w.toFixed(2)}),e.jsx("td",{className:"px-12 py-2 whitespace-nowrap",children:y||u.toFixed(2)})]}),p&&e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:b}),e.jsx("td",{}),e.jsx("td",{}),e.jsxs("td",{className:"px-8 py-2 whitespace-nowrap",children:["(",p,")"]})]})]},t))})]})}),m&&e.jsx("div",{children:e.jsx(E,{subtotal:i,totalDiscount:N,transactionSummary:c})})]})})},"window1")})};export{B as SaleWindowTabs};
