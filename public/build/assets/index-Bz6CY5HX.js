import{r as s,j as p}from"./app-B4BG-zsf.js";import{M as k,v as F,P as K,w as T,x as U,y as B,z as D,c as L,h as S,b as z,i as A}from"./chunk-XHQUSKIE-DypDiBrP.js";class W extends s.Component{getSnapshotBeforeUpdate(o){const e=this.props.childRef.current;if(e&&o.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function G({children:r,isPresent:o}){const e=s.useId(),t=s.useRef(null),h=s.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=s.useContext(k);return s.useInsertionEffect(()=>{const{width:u,height:d,top:x,left:f}=h.current;if(o||!t.current||!u||!d)return;t.current.dataset.motionPopId=e;const n=document.createElement("style");return l&&(n.nonce=l),document.head.appendChild(n),n.sheet&&n.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            top: ${x}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(n)}},[o]),p.jsx(W,{isPresent:o,childRef:t,sizeRef:h,children:s.cloneElement(r,{ref:t})})}const M=({children:r,initial:o,isPresent:e,onExitComplete:t,custom:h,presenceAffectsLayout:l,mode:u})=>{const d=F(H),x=s.useId(),f=s.useMemo(()=>({id:x,initial:o,isPresent:e,custom:h,onExitComplete:n=>{d.set(n,!0);for(const a of d.values())if(!a)return;t&&t()},register:n=>(d.set(n,!1),()=>d.delete(n))}),l?[Math.random()]:[e]);return s.useMemo(()=>{d.forEach((n,a)=>d.set(a,!1))},[e]),s.useEffect(()=>{!e&&!d.size&&t&&t()},[e]),u==="popLayout"&&(r=p.jsx(G,{isPresent:e,children:r})),p.jsx(K.Provider,{value:f,children:r})};function H(){return new Map}function V(r){return s.useEffect(()=>()=>r(),[])}const C=r=>r.key||"";function _(r,o){r.forEach(e=>{const t=C(e);o.set(t,e)})}function q(r){const o=[];return s.Children.forEach(r,e=>{s.isValidElement(e)&&o.push(e)}),o}const Q=({children:r,custom:o,initial:e=!0,onExitComplete:t,exitBeforeEnter:h,presenceAffectsLayout:l=!0,mode:u="sync"})=>{const d=s.useContext(T).forceRender||U()[0],x=B(),f=q(r);let n=f;const a=s.useRef(new Map).current,g=s.useRef(n),m=s.useRef(new Map).current,P=s.useRef(!0);if(D(()=>{P.current=!1,_(f,m),g.current=n}),V(()=>{P.current=!0,m.clear(),a.clear()}),P.current)return p.jsx(p.Fragment,{children:n.map(i=>p.jsx(M,{isPresent:!0,initial:e?void 0:!1,presenceAffectsLayout:l,mode:u,children:i},C(i)))});n=[...n];const E=g.current.map(C),b=f.map(C),R=E.length;for(let i=0;i<R;i++){const c=E[i];b.indexOf(c)===-1&&!a.has(c)&&a.set(c,void 0)}return u==="wait"&&a.size&&(n=[]),a.forEach((i,c)=>{if(b.indexOf(c)!==-1)return;const v=m.get(c);if(!v)return;const w=E.indexOf(c);let y=i;if(!y){const O=()=>{a.delete(c);const j=Array.from(m.keys()).filter($=>!b.includes($));if(j.forEach($=>m.delete($)),g.current=f.filter($=>{const I=C($);return I===c||j.includes(I)}),!a.size){if(x.current===!1)return;d(),t&&t()}};y=p.jsx(M,{isPresent:!1,onExitComplete:O,custom:o,presenceAffectsLayout:l,mode:u,children:v},C(v)),a.set(c,y)}n.splice(w,0,y)}),n=n.map(i=>{const c=i.key;return a.has(c)?i:p.jsx(M,{isPresent:!0,presenceAffectsLayout:l,mode:u,children:i},C(i))}),p.jsx(p.Fragment,{children:a.size?n:n.map(i=>s.cloneElement(i))})};function X(r,o){let{elementType:e="button",isDisabled:t,onPress:h,onPressStart:l,onPressEnd:u,onPressChange:d,preventFocusOnPress:x,allowFocusWhenDisabled:f,onClick:n,href:a,target:g,rel:m,type:P="button",allowTextSelectionOnPress:E}=r,b;e==="button"?b={type:P,disabled:t}:b={role:"button",tabIndex:t?void 0:0,href:e==="a"&&t?void 0:a,target:e==="a"?g:void 0,type:e==="input"?P:void 0,disabled:e==="input"?t:void 0,"aria-disabled":!t||e==="input"?void 0:t,rel:e==="a"?m:void 0};let{pressProps:R,isPressed:i}=L({onPressStart:l,onPressEnd:u,onPressChange:d,onPress:h,isDisabled:t,preventFocusOnPress:x,allowTextSelectionOnPress:E,ref:o}),{focusableProps:c}=S(r,o);f&&(c.tabIndex=t?-1:c.tabIndex);let v=z(c,R,A(r,{labelable:!0}));return{isPressed:i,buttonProps:z(b,v,{"aria-haspopup":r["aria-haspopup"],"aria-expanded":r["aria-expanded"],"aria-controls":r["aria-controls"],"aria-pressed":r["aria-pressed"],onClick:w=>{n==null||n(w)}})}}export{Q as A,X as u};
